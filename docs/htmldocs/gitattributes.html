<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 9.1.1" />
<title>gitattributes(5)</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overridden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install();
/*]]>*/
</script>
</head>
<body class="manpage">
<div id="header">
<h1>
gitattributes(5) Manual Page
</h1>
<h2>NAME</h2>
<div class="sectionbody">
<p>gitattributes -
   パスごとの属性の定義
</p>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph"><p>$GIT_DIR/info/attributes, .gitattributes</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph"><p><code>gitattributes</code> ファイルは、パス名に属性(attributes)を与える単純なテキストファイルです。</p></div>
<div class="paragraph"><p><code>gitattributes</code> ファイルの各行は以下の形式です:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>pattern attr1 attr2 ...</code></pre>
</div></div>
<div class="paragraph"><p>つまり、パターンの後に空白(whitespaces)で区切られた属性リストが続きます。先頭と末尾の空白は無視されます。 <em>#</em>
で始まる行は無視されます。
二重引用符(<code>"</code>)で始まるパターンは、Cスタイルでクォートされます。パターンが問題のパスと一致すると、その行にリストされている属性がそのパスに与えられます。</p></div>
<div class="paragraph"><p>各属性は、特定のパスに対して以下のいずれかの状態になる可能性があります:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
set(設定)
</dt>
<dd>
<p>
        パスには、特別な値 <code>true</code> を持つ属性があります。これは、属性リストにその属性の名前のみをリストすることによって指定されます。
</p>
</dd>
<dt class="hdlist1">
unset(設定解除)
</dt>
<dd>
<p>
        パスには、特別な値 <code>false</code> を持つ属性があります。 これは、属性リストにダッシュ <code>-</code>
        で始まる属性の名前をリストすることによって指定されます。
</p>
</dd>
<dt class="hdlist1">
Set to a value(値を設定)
</dt>
<dd>
<p>
        パスには、指定の文字列値を持つ属性があります。これは、属性の名前の後に等号 <code>=</code> とその値を、属性リストにリストすることによって指定されます。
</p>
</dd>
<dt class="hdlist1">
unspecified(未指定)
</dt>
<dd>
<p>
        パスに一致するパターンはなく、パスに属性があるかどうかはわかりません。パスの属性は未指定(unspecified)であると言われます。
</p>
</dd>
</dl></div>
<div class="paragraph"><p>複数のパターンがパスに一致する場合、後の行が前の行をオーバーライドします。このオーバーライドは属性ごとに行われます。</p></div>
<div class="paragraph"><p>パターンがパスと一致するルールは、以下のいくつかの例外を除いて、 <code>.gitignore</code> ファイル(<a href="gitignore.html">gitignore(5)</a>
参照)と同じです:</p></div>
<div class="ulist"><ul>
<li>
<p>
否定パターンは使えません
</p>
</li>
<li>
<p>
ディレクトリに一致するパターンは、そのディレクトリ内のパスに再帰的に一致しません(したがって、属性ファイルで末尾のスラッシュの <code>path/</code>
    構文を使用しても意味がありません。代わりに <code>path/**</code> を使用してください)
</p>
</li>
</ul></div>
<div class="paragraph"><p>パスに割り当てる属性を決定するとき、Gitは、(優先順位が最も高い) <code>$GIT_DIR/info/attributes</code>
ファイルと、問題のパスと同じディレクトリにある <code>.gitattributes</code>
ファイルと、作業ツリーの最上位までその親ディレクトリを参照します(<code>.gitattributes</code>
を含むディレクトリが問題のパスから離れるほど、優先順位は低くなります)。最後に、(優先順位が最も低い)グローバルファイルとシステム全体のファイルが考慮されます。</p></div>
<div class="paragraph"><p><code>.gitattributes</code>
ファイルが作業ツリーにない場合、インデックス内のパスがフォールバックとして使用されます。チェックアウト処理では、インデックスの
<code>.gitattributes</code> が使用され、作業ツリーのファイルがフォールバックとして使用されます。</p></div>
<div class="paragraph"><p>単一のリポジトリのみに影響を与えたい(つまり、そのリポジトリの1人のユーザーのワークフローに固有のファイルに属性を割り当てる)場合は、属性を
<code>$GIT_DIR/info/attributes</code>
ファイルに配置する必要があります。バージョン管理して他のリポジトリに配布する必要がある属性(つまり、すべてのユーザーが関心を持つ属性)は、
<code>.gitattributes</code> ファイルに入れる必要があります(<a href="git-config.html">git-config(1)</a> を参照)。
あるユーザーのすべてのリポジトリに影響を与える属性は、 <code>core.attributesFile</code>
構成オプションで指定されたファイルに配置する必要があり、そのデフォルト値は $XDG_CONFIG_HOME/git/attributes です。
$XDG_CONFIG_HOME が設定されていないか空の場合、代わりに $HOME/.config/git/attributes
が使用されます。システム上のすべてのユーザーの属性は、 <code>$(prefix)/etc/gitattributes</code> ファイルに配置する必要があります。</p></div>
<div class="paragraph"><p>しばしばあなたは、 Unspecified(未指定)状態へのパスの属性の設定をオーバーライドする必要があります。これは、感嘆符 <code>!</code>
が前に付いた属性の名前をリストすることで行えます。</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_effects">EFFECTS</h2>
<div class="sectionbody">
<div class="paragraph"><p>Gitによる特定の操作は、特定の属性をパスに割り当てることによって影響を受ける可能性があります。
現在、以下の操作は属性対応(attributes-aware)です。</p></div>
<div class="sect2">
<h3 id="_checking_out_and_checking_in">Checking-out and checking-in</h3>
<div class="paragraph"><p>これらの属性は、 <code>git switch</code> や <code>git checkout</code> や <code>git merge</code>
などのコマンドが実行されたときに、リポジトリに保存されているコンテンツが作業ツリーファイルにコピーされる方法に影響します。 また、Gitが <code>git
add</code> や <code>git commit</code> する時に準備したコンテンツをリポジトリの作業ツリーに保存する方法にも影響します。</p></div>
<div class="sect3">
<h4 id="_code_text_code"><code>text</code></h4>
<div class="paragraph"><p>この属性は、行末の正規化を有効にして制御します。テキストファイルが正規化されると、その行末はリポジトリ内でLFに変換されます。作業ディレクトリ内で使用される行末スタイルを制御するには、単一のファイルには
<code>eol</code> 属性を使用し、すべてのテキストファイルには <code>core.eol</code> 構成変数を使用します。 <code>core.autocrlf</code> を <code>true</code>
または <code>input</code> に設定すると、 <code>core.eol</code> がオーバーライドされることに注意してください(<a href="git-config.html">git-config(1)</a>
のこれらのオプションの定義を参照してください)。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
set(設定)
</dt>
<dd>
<p>
        パスに <code>text</code>
        属性を設定すると、行末の正規化が有効になり、パスがテキストファイルとしてマークされます。行末変換は、コンテンツタイプを推測せずに行われます。
</p>
</dd>
<dt class="hdlist1">
unset(設定解除)
</dt>
<dd>
<p>
        パスの <code>text</code> 属性を設定解除(unset)すると、チェックインまたはチェックアウト時に行末変換を試行しないようにGitに指示します。
</p>
</dd>
<dt class="hdlist1">
Set to string value "auto"
</dt>
<dd>
<p>
        <code>text</code> の値が "auto"
        に設定されている場合、パスは自動行末変換用にマークされます。Gitがコンテンツがテキストであると判断した場合、その行末はチェックイン時にLFに変換されます。ファイルがCRLFでコミットされている場合、変換は行われません。
</p>
</dd>
<dt class="hdlist1">
unspecified(未指定)
</dt>
<dd>
<p>
        <code>text</code> 属性が指定されていない場合、Gitは <code>core.autocrlf</code> 構成変数を使用してファイルを変換する必要があるかどうかを判断します。
</p>
</dd>
</dl></div>
<div class="paragraph"><p>その他の値の場合、Gitは <code>text</code> が未指定(unspecified)であるかのように動作します。</p></div>
</div>
<div class="sect3">
<h4 id="_code_eol_code"><code>eol</code></h4>
<div class="paragraph"><p>この属性は、作業ディレクトリ内で使用される特定の行末スタイルを設定します。コンテンツチェックなしで行末変換を可能にし、<code>text</code>
属性を効果的に設定します。インデックスにあるCRLF行末のパスにこの属性を設定すると、パスがダーティと見なされる可能性があることに注意してください。インデックスにパスを再度追加すると、インデックスの行末が正規化されます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
文字列値 "crlf" を設定
</dt>
<dd>
<p>
        この設定により、Gitはチェックイン時にこのファイルの行末を正規化し、ファイルがチェックアウトされるときにCRLFに変換します。
</p>
</dd>
<dt class="hdlist1">
文字列値 "lf" を設定
</dt>
<dd>
<p>
        この設定により、Gitはチェックイン時に行末をLFに正規化し、ファイルがチェックアウトされたときにCRLFに変換されないようにします。
</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="_code_crlf_code_属性との下位互換性"><code>crlf</code> 属性との下位互換性</h4>
<div class="paragraph"><p>下位互換性のために、 <code>crlf</code> 属性は以下のように解釈されます:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>crlf            text
-crlf           -text
crlf=input      eol=lf</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_行末変換">行末変換</h4>
<div class="paragraph"><p>Gitは通常、ファイルの内容をそのままにしますが、リポジトリ内で行末をLFに正規化し、オプションで、ファイルがチェックアウトされたときにCRLFに変換するように構成できます。</p></div>
<div class="paragraph"><p>あなたが作業しているリポジトリに関係なく、あなたの作業ディレクトリ内でCRLF行末を設定したいだけの場合は、属性を使用せずに構成変数
<code>core.autocrlf</code> を設定できます。</p></div>
<div class="listingblock">
<div class="content">
<pre><code>[core]
        autocrlf = true</code></pre>
</div></div>
<div class="paragraph"><p>これにより、テキストファイルの正規化は強制されませんが、リポジトリに導入するテキストファイルの行末は、追加時にLFに正規化され、リポジトリですでに正規化されているファイルは正規化されたままになります。</p></div>
<div class="paragraph"><p>貢献者(contributor)がリポジトリに導入するテキストファイルの行末が正規化されていることを確認する場合は、「全て」のファイルに対して
<code>text</code> 属性を "auto" に設定できます。</p></div>
<div class="listingblock">
<div class="content">
<pre><code>*       text=auto</code></pre>
</div></div>
<div class="paragraph"><p>属性を使用すると、行末の変換方法をきめ細かく制御できます。以下は、Gitが <code>.txt</code> と、<code>.vcproj</code> と <code>.sh</code> ファイルを正規化し、
<code>.vcproj</code> ファイルがCRLFを持ち、 <code>.sh</code> ファイルが作業ディレクトリでLFを持っていることを確認し、<code>.jpg</code>
ファイルがその内容に関係なく正規化されないようにする例です。</p></div>
<div class="listingblock">
<div class="content">
<pre><code>*               text=auto
*.txt           text
*.vcproj        text eol=crlf
*.sh            text eol=lf
*.jpg           -text</code></pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">中央リポジトリへのプッシュとプルを使用してクロスプラットフォームプロジェクトで <code>text = auto</code>
変換が有効になっている場合、CRLFを含むテキストファイルを正規化する必要があります。</td>
</tr></table>
</div>
<div class="paragraph"><p>クリーンな作業ディレクトリから始めます:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ echo "* text=auto" &gt;.gitattributes
$ git add --renormalize .
$ git status        # 正規化されるファイルを表示
$ git commit -m "Introduce end-of-line normalization"</code></pre>
</div></div>
<div class="paragraph"><p>正規化してはならないファイルが <code>git status</code> に表示される場合は、 <code>git add -u</code> を実行する前に、以下のように <code>text</code>
属性の設定を解除してください。</p></div>
<div class="listingblock">
<div class="content">
<pre><code>manual.pdf      -text</code></pre>
</div></div>
<div class="paragraph"><p>逆に、Gitが検出しないテキストファイルは、以下のように正規化を手動で有効にすることができます。</p></div>
<div class="listingblock">
<div class="content">
<pre><code>weirdchars.txt  text</code></pre>
</div></div>
<div class="paragraph"><p><code>core.safecrlf</code> が "true" または "warn" に設定されている場合、Gitは変換が <code>core.autocrlf</code>
の現在の設定に対して可逆的であるかどうかを確認します。 "true" の場合、Gitは不可逆的な変換を拒否します。 "warn"
の場合、Gitは警告を出力するだけで、元に戻せない変換を受け入れます。作業ツリー内のファイルに対してこのような変換が行われるのを防ぐための安全トリガーがありますが、いくつかの例外がありますが、しかし…</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>git add</em> 自体は作業ツリー内のファイルに影響を与えません。その次に行うチェックアウトは影響を与えるため、セーフティーがトリガーされます:
</p>
</li>
<li>
<p>
パッチでテキストファイルを更新するための <code>git apply</code>
  は作業ツリー内のファイルに影響を与えますが、操作はテキストファイルに関するものであり、CRLF変換は行末の不整合の修正に関するものであるため、セーフティーはトリガーされません。
</p>
</li>
<li>
<p>
<code>git diff</code> 自体は作業ツリー内のファイルに影響を与えません。多くの場合、次に <code>git add</code>
  する予定の変更を検査するために実行されます。潜在的な問題を早期に発見するために、セーフティーがトリガーされます。
</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_code_working_tree_encoding_code"><code>working-tree-encoding</code></h4>
<div class="paragraph"><p>Gitは、ASCIIまたはそのスーパーセットの1つ(UTF-8、ISO-8859-1など)でエンコードされたファイルをテキストファイルとして認識します。他の特定のエンコーディング(UTF-16など)でエンコードされたファイルはバイナリとして解釈されるため、組み込みのGitテキスト処理ツール(<code>git
diff</code> など)や、ほとんどのGitWebフロントエンドはデフォルトでこれらのファイルのコンテンツを視覚化しません 。</p></div>
<div class="paragraph"><p>このような場合、 <code>working-tree-encoding</code>
属性を使用して作業ディレクトリ内のファイルのエンコーディングをGitに指示できます。この属性を持つファイルがGitに追加されると、Gitは指定されたエンコーディングからUTF-8にコンテンツを再エンコードします。最後に、GitはUTF-8でエンコードされたコンテンツを内部データ構造(「インデックス」と呼ばれます)に格納します。チェックアウト時に、コンテンツは指定されたエンコーディングに再エンコードされます。</p></div>
<div class="paragraph"><p>注意: <code>working-tree-encoding</code> 属性を使用すると、いくつかの落とし穴があることに注意してください:</p></div>
<div class="ulist"><ul>
<li>
<p>
(2018年3月現在、)代替のGit実装(JGitやlibgit2など)やGit古いバージョンは、 <code>working-tree-encoding</code>
  属性をサポートしていません。リポジトリで <code>working-tree-encoding</code>
  属性を使用する場合は、リポジトリを使用するすべてのクライアントがそれをサポートしていることを確認することを強くお勧めします。
</p>
<div class="paragraph"><p>たとえば、Microsoft Visual Studio
リソースファイル(<code>*.rc</code>)またはPowerShellスクリプトファイル(<code>*.ps1</code>)は、UTF-16でエンコードされる場合があります。
<code>*.ps1</code> をUTF-16のファイルとして宣言し、 <code>working-tree-encoding</code> が有効なGitクライアントで <code>foo.ps1</code>
を追加すると、 <code>foo.ps1</code> はUTF-8として内部に保存されます。 <code>working-tree-encoding</code>
をサポートしていないクライアントは、 <code>foo.ps1</code>
をUTF-8でエンコードされたファイルとしてチェックアウトします。これは通常、このファイルのユーザーに問題を引き起こします。</p></div>
<div class="paragraph"><p><code>working-tree-encoding</code> 属性をサポートしないGitクライアントが新しいファイル <code>bar.ps1</code> を追加した場合、
<code>bar.ps1`は内部に「現状のまま」(この例ではおそらくUTF-16として)保存されます。そしてそれに対して、
`working-tree-encoding</code>
をサポートするクライアントは、内部コンテンツをUTF-8として解釈し、チェックアウト時にUTF-16に変換しようとします。その操作は失敗し、エラーが発生します。</p></div>
</li>
<li>
<p>
コンテンツを非UTFエンコーディングに再エンコードすると、変換がUTF-8ラウンドトリップセーフではない可能性があるため、エラーが発生する可能性があります。
  エンコーディングがラウンドトリップセーフではないと思われる場合は、それを <code>core.checkRoundtripEncoding</code>
  に追加して、Gitにラウンドトリップエンコーディングをチェックさせます(<a href="git-config.html">git-config(1)</a> を参照)。
  SHIFT-JIS(日本語文字セット)はUTF-8でラウンドトリップ問題があることが知られており、デフォルトでチェックされています。
</p>
</li>
<li>
<p>
コンテンツを再エンコードするには、計算機資源が必要なため、特定のGit操作(<code>git checkout</code> や <code>git add</code>
  など)の速度を低下させる可能性があります。
</p>
</li>
</ul></div>
<div class="paragraph"><p><code>working-tree-encoding</code>
属性は、ファイルをUTF-8エンコーディングで保存できない場合や、Gitでコンテンツをテキストとして処理できるようにする場合にのみ使用してください。</p></div>
<div class="paragraph"><p>例として、 あなたの <em>*.ps1</em>
ファイルがバイトオーダーマーク(BOM)付きでUTF-16エンコードされており、Gitであなたのプラットフォームに基づいて自動行末変換を実行する場合、以下の属性を使用します。</p></div>
<div class="listingblock">
<div class="content">
<pre><code>*.ps1           text working-tree-encoding=UTF-16</code></pre>
</div></div>
<div class="paragraph"><p>あなたの <em>* .ps1</em>
ファイルがBOMなしでUTF-16リトルエンディアンでエンコードされており、Gitで作業ディレクトリのWindows行末を使用する場合は、以下の属性を使用します(BOMを使用したUTF-16リトルエンディアンが必要な場合、
<code>UTF-16LE</code> の代わりに <code>UTF-16LE-BOM</code> を使用します)。あいまいさを避けるために <code>working-tree-encoding</code>
属性を使用する場合は、行末を <code>eol</code> で明示的に定義することを強くお勧めします。</p></div>
<div class="listingblock">
<div class="content">
<pre><code>*.ps1           text working-tree-encoding=UTF-16LE eol=CRLF</code></pre>
</div></div>
<div class="paragraph"><p>あなたは以下のコマンドを使用して、あなたのプラットフォームで使用可能なすべてのエンコーディングのリストを取得できます:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>iconv --list</code></pre>
</div></div>
<div class="paragraph"><p>ファイルのエンコーディングがわからない場合、あなたは <code>file</code> コマンドを使用してエンコーディングを推測できます:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>file foo.ps1</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_code_ident_code"><code>ident</code></h4>
<div class="paragraph"><p>パスに属性 <code>ident</code> が設定されている場合、Gitはチェックアウト時にブロブオブジェクト内の <code>$Id$</code> を <code>$Id:</code>
に置き換え、その後に40文字の16進ブロブオブジェクト名が続き、その後にドル記号 <code>$</code> が続きます。ワークツリーファイルで <code>$Id:</code> で始まり、
<code>$</code> で終わるバイトシーケンスは、チェックイン時に <code>$Id$</code> に置き換えられます。</p></div>
</div>
<div class="sect3">
<h4 id="_code_filter_code"><code>filter</code></h4>
<div class="paragraph"><p>filter` 属性には、構成で指定されたフィルタドライバの名前を文字列で指定することができます。</p></div>
<div class="paragraph"><p>フィルタドライバは、 <code>clean</code> コマンドと <code>smudge</code>
コマンドで構成されており、どちらも指定しないでおくことができます。チェックアウト時に、 <code>smudge</code>
コマンドが指定されると、コマンドはその標準入力からブロブオブジェクトを供給され、その標準出力はワークツリーファイルを更新するために使用されます。同様に、
<code>clean</code>
コマンドはチェックイン時にワークツリーファイルの内容を変換するために使用されます。デフォルトでは、これらのコマンドは単一のブロブのみを処理して終了します。長時間実行される
<code>process</code> フィルターが <code>clean</code> および/または <code>smudge</code>
フィルターの代わりに使用される場合、Gitは単一のGitコマンドの存続期間中、単一のフィルターコマンド呼び出しですべてのブロブを処理できます。例えば
<code>git --all</code> を追加します。長時間実行される <code>process</code>
フィルターが構成されている場合、構成された単一のブロブフィルターよりも常に優先されます。 <code>process</code>
フィルターとの通信に使用されるプロトコルの説明については、以下のセクションを参照してください。</p></div>
<div class="paragraph"><p>コンテンツフィルタリングの用途の1つは、プラットフォームやファイルシステムやユーザーが使用しやすい形にコンテンツをもみもみ(massage)することです。この操作モードでは、ここでのキーワードは「より便利」であり、「使用できないものを使用可能にする」ではありません。
つまり、誰かがフィルタードライバーの定義を設定解除した場合、または適切なフィルタープログラムを持っていない場合でも、プロジェクトは引き続き使用可能である必要があります。</p></div>
<div class="paragraph"><p>コンテンツフィルタリングのもう1つの用途は、リポジトリに直接使用できないコンテンツ(Gitの外部に保存されている実際のコンテンツを参照するUUIDや暗号化されたコンテンツなど)を保存し、チェックアウト時に使用可能な形式に変換することです(例:
外部コンテンツをダウンロードする、または暗号化されたコンテンツを復号化する)。</p></div>
<div class="paragraph"><p>これらの2つのフィルターの振る舞い異なり、デフォルトでは、フィルターは前者と見なされ、コンテンツをより便利な形にもみもみ(massage)します。構成にフィルタードライバー定義がないか、ゼロ以外のステータスで終了するフィルタードライバーはエラーではありませんが、フィルターを無操作パススルーにします。</p></div>
<div class="paragraph"><p>filter.&lt;driver&gt;.required 構成変数を <code>true</code>
に設定することにより、フィルター自体が使用できないコンテンツを使用可能なコンテンツに変換することを宣言できます。</p></div>
<div class="paragraph"><p>注意: clean フィルターを変更するたびに、リポジトリを再正規化する必要があります: $ git add --renormalize</p></div>
<div class="paragraph"><p>たとえば、 <code>.gitattributes</code> で、あなたはパスに <code>filter</code> 属性を割り当てるとします。</p></div>
<div class="listingblock">
<div class="content">
<pre><code>*.c     filter=indent</code></pre>
</div></div>
<div class="paragraph"><p>次に、あなたは以下のように <code>.git/config</code> で <code>filter.indent.clean</code> と <code>filter.indent.smudge</code>
構成を定義して、ソースファイルがチェックインされたとき(<code>clean</code> が実行されます)と、チェックアウトされたとき(コマンドが <code>cat</code>
であるため、変更は行われません)、にCプログラムの内容を変更するコマンドのペアを指定します。</p></div>
<div class="listingblock">
<div class="content">
<pre><code>[filter "indent"]
        clean = indent
        smudge = cat</code></pre>
</div></div>
<div class="paragraph"><p>最良の結果を得るには、 <code>clean</code> を2回実行しても出力を変更しないでください("clean→clean" は "clean"
と同等である必要があります)。また、複数の <code>smudge</code> コマンドで <code>clean</code>
の出力を変更しないでください("smudge→smudge→clean" は "clean” と同等である必要があります)。
以下のmergingセクションを参照してください。</p></div>
<div class="paragraph"><p>"indent"
フィルターは、この点で適切に動作します。すでに正しくインデントされている入力は変更されません。この場合、smudgeフィルターがないということは、cleanフィルターが自身の出力を変更せずに受け入れる必要があることを意味します。</p></div>
<div class="paragraph"><p>保存されたコンテンツを使用可能にするためにフィルターが成功する必要がある場合は、構成でフィルターが <code>required</code>
(必須)であることを宣言できます:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>[filter "crypt"]
        clean = openssl enc ...
        smudge = openssl enc -d ...
        required</code></pre>
</div></div>
<div class="paragraph"><p>フィルタコマンドラインのシーケンス <code>%f</code>
は、フィルタが機能しているファイルの名前に置き換えられます。フィルタはこれをキーワード置換で使用する場合があります。例えば:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>[filter "p4"]
        clean = git-p4-filter --clean %f
        smudge = git-p4-filter --smudge %f</code></pre>
</div></div>
<div class="paragraph"><p>注意: <code>%f</code>
は、作業中のパスの名前であることに注意してください。フィルタリングされているバージョンによっては、ディスク上の対応するファイルが存在しないか、内容が異なる場合があります。したがって、smudgeおよびcleanコマンドは、ディスク上のファイルにアクセスしようとするのではなく、標準入力で提供されるコンテンツのフィルターとしてのみ機能する必要があります。</p></div>
</div>
<div class="sect3">
<h4 id="_long_running_filter_process">Long Running Filter Process</h4>
<div class="paragraph"><p>フィルタコマンド(文字列値)が <code>filter.&lt;driver&gt;.process</code>
を介して定義されている場合、Gitは単一のGitコマンドの存続期間中、単一のフィルタ呼び出しですべてのブロブを処理できます。
これは、長時間実行プロセスプロトコル( technical/long-running-process-protocol.txt
にて説明)を使用して実現されます。</p></div>
<div class="paragraph"><p>Gitは、クリーニング(cleaned)またはスマッジング(smudged)が必要な最初のファイルを検出すると、フィルターを開始してハンドシェイクを実行します。ハンドシェイクでは、Gitによって送信されるウェルカムメッセージは
"git-filter-client" であり、プロトコルバージョン2("version=2")のみがサポートされ、サポートされる機能は "clean"
と "smudge" と ”delay" です。</p></div>
<div class="paragraph"><p>その後、Gitはフラッシュパケットで終了する "key=value"
ペアのリストを送信します。リストには、少なくとも(サポートされている機能に基づく)フィルターコマンドと、リポジトリルートを基準にしてフィルタリングするファイルのパス名が含まれます。フラッシュパケットの直後に、Gitはコンテンツを0個以上のpkt-lineパケットに分割して送信し、フラッシュパケットを送信してコンテンツを終了します。フィルタは、コンテンツと最終的なフラッシュパケットを受信する前に、応答を送信してはならないことに注意してください。
また、 "key=value" ペアの「value」には「=」文字を含めることができますが、キーには含めることはできません。</p></div>
<div class="listingblock">
<div class="content">
<pre><code>packet:          git&gt; command=smudge
packet:          git&gt; pathname=path/testfile.dat
packet:          git&gt; 0000
packet:          git&gt; CONTENT
packet:          git&gt; 0000</code></pre>
</div></div>
<div class="paragraph"><p>フィルタは、フラッシュパケットで終了する "key=value" ペアのリストで応答することが期待されます。フィルタで問題が発生しない場合は、リストに
"success"
ステータスが含まれている必要があります。これらのパケットの直後に、フィルターはコンテンツを0個以上のpkt-lineパケットで送信し、最後にフラッシュパケットを送信することが期待されます。最後に、フラッシュパケットで終了する
"key=value"
ペアの2番目のリストが必要です。フィルタは、2番目のリストのステータスを変更したり、空のリストでステータスをそのまま維持したりできます。空のリストは、フラッシュパケットで終了する必要があることに注意してください。</p></div>
<div class="listingblock">
<div class="content">
<pre><code>packet:          git&lt; status=success
packet:          git&lt; 0000
packet:          git&lt; SMUDGED_CONTENT
packet:          git&lt; 0000
packet:          git&lt; 0000  # empty list, keep "status=success" unchanged!</code></pre>
</div></div>
<div class="paragraph"><p>結果のコンテンツが空の場合、フィルターは "success" ステータスとフラッシュパケットで応答して、空のコンテンツを通知することが期待されます。</p></div>
<div class="listingblock">
<div class="content">
<pre><code>packet:          git&lt; status=success
packet:          git&lt; 0000
packet:          git&lt; 0000  # empty content!
packet:          git&lt; 0000  # empty list, keep "status=success" unchanged!</code></pre>
</div></div>
<div class="paragraph"><p>フィルタがコンテンツを処理できない、または処理したくない場合は、 "error" ステータスで応答することが期待されます。</p></div>
<div class="listingblock">
<div class="content">
<pre><code>packet:          git&lt; status=error
packet:          git&lt; 0000</code></pre>
</div></div>
<div class="paragraph"><p>フィルタの処理中にエラーが発生した場合、コンテンツが(部分的または完全に)送信された後、ステータス "error" を送信できます。</p></div>
<div class="listingblock">
<div class="content">
<pre><code>packet:          git&lt; status=success
packet:          git&lt; 0000
packet:          git&lt; HALF_WRITTEN_ERRONEOUS_CONTENT
packet:          git&lt; 0000
packet:          git&lt; status=error
packet:          git&lt; 0000</code></pre>
</div></div>
<div class="paragraph"><p>フィルタがGitプロセスの存続期間中、コンテンツと将来のコンテンツを処理できない、または処理したくない場合は、プロトコルの任意の時点で "abort"
ステータスで応答することが期待されます。</p></div>
<div class="listingblock">
<div class="content">
<pre><code>packet:          git&lt; status=abort
packet:          git&lt; 0000</code></pre>
</div></div>
<div class="paragraph"><p>"error"/"abort" ステータスが設定されている場合、Gitはフィルタープロセスを停止も再開もしません。 ただし、Gitは
<code>filter.&lt;driver&gt;.required`フラグに従って終了コードを設定し、 `filter.&lt;driver&gt;.clean</code> /
<code>filter.&lt;driver&gt;.smudge</code> メカニズムの振る舞いを真似っこします。</p></div>
<div class="paragraph"><p>通信中にフィルターが停止した場合、またはプロトコルに準拠していない場合、Gitはフィルタープロセスを停止し、処理が必要な次のファイルでフィルターを再開します。
<code>filter.&lt;driver&gt;.required</code> フラグの設定によっては、Gitはそれをエラーとして解釈します。</p></div>
</div>
<div class="sect3">
<h4 id="_delay">Delay</h4>
<div class="paragraph"><p>フィルタが "delay" 機能をサポートしている場合、Gitはフィルタコマンドとパス名の後にフラグ "can-delay"
を送信できます。このフラグは、コンテンツなしでステータス "delayed"
とフラッシュパケットで応答することにより、フィルターが現在のブロブのフィルタリングを遅らせることができることを示します(たとえば、ネットワーク遅延を補正するため)。</p></div>
<div class="listingblock">
<div class="content">
<pre><code>packet:          git&gt; command=smudge
packet:          git&gt; pathname=path/testfile.dat
packet:          git&gt; can-delay=1
packet:          git&gt; 0000
packet:          git&gt; CONTENT
packet:          git&gt; 0000
packet:          git&lt; status=delayed
packet:          git&lt; 0000</code></pre>
</div></div>
<div class="paragraph"><p>フィルタが "delay" 機能をサポートしている場合は、 "list_available_blobs"
コマンドをサポートしている必要があります。Gitがこのコマンドを送信すると、フィルターは、以前に遅延されて現在使用可能なブロブを表すパス名のリストを返すことが期待されます。リストはフラッシュパケットで終了する必要があり、その後に
"success" ステータスが続き、これもフラッシュパケットで終了します。
遅延パスのブロブがまだ利用できない場合、フィルターは少なくとも1つのブロブが利用可能になるまで応答をブロックすることが期待されます。フィルタは、空のリストを送信することで、遅延ブロブがなくなったことをGitに伝えることができます。フィルタが空のリストで応答するとすぐに、Gitは質問を停止します。この時点でGitが受信していないすべてのブロブは欠落していると見なされ、エラーが発生します。</p></div>
<div class="listingblock">
<div class="content">
<pre><code>packet:          git&gt; command=list_available_blobs
packet:          git&gt; 0000
packet:          git&lt; pathname=path/testfile.dat
packet:          git&lt; pathname=path/otherfile.dat
packet:          git&lt; 0000
packet:          git&lt; status=success
packet:          git&lt; 0000</code></pre>
</div></div>
<div class="paragraph"><p>Gitはパス名を受け取った後、対応するブロブを再度要求します。これらのリクエストには、パス名と空のコンテンツセクションが含まれています。フィルターは、上記で説明した通常の方法で汚れたコンテンツ(smudged
content)に応答することが期待されます。</p></div>
<div class="listingblock">
<div class="content">
<pre><code>packet:          git&gt; command=smudge
packet:          git&gt; pathname=path/testfile.dat
packet:          git&gt; 0000
packet:          git&gt; 0000  # empty content!
packet:          git&lt; status=success
packet:          git&lt; 0000
packet:          git&lt; SMUDGED_CONTENT
packet:          git&lt; 0000
packet:          git&lt; 0000  # empty list, keep "status=success" unchanged!</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_example">Example</h4>
<div class="paragraph"><p>長時間実行されるフィルターのデモの実装は、Gitコアリポジトリにある  <code>contrib/long-running-filter/example.pl</code>
にあります。 独自の長時間実行フィルタープロセスを開発する場合は、 <code>GIT_TRACE_PACKET</code>
環境変数がデバッグに非常に役立ちます(<a href="git.html">git(1)</a> を参照)。</p></div>
<div class="paragraph"><p>既存の <code>filter.&lt;driver&gt;.clean</code> や <code>filter.&lt;driver&gt;.smudge</code> コマンドを
<code>filter.&lt;driver&gt;.process</code>
で使用できないことに注意してください。前者は後者とは異なるプロセス間通信プロトコルを使用するからです。</p></div>
</div>
<div class="sect3">
<h4 id="_チェックイン_チェックアウト属性間の相互作用">チェックイン/チェックアウト属性間の相互作用</h4>
<div class="paragraph"><p>チェックインのコードの流れでは、ワークツリーファイルは最初に(指定され、対応するドライバーが定義されている場合、) <code>filter</code>
ドライバーで変換され、次に結果が(指定されている場合) `ident`で処理され、最後に(指定されて適用可能な場合) `text`で処理されます。</p></div>
<div class="paragraph"><p>チェックアウトのコードの流れでは、ブロブコンテンツは最初に <code>text</code> で変換され、次に <code>ident</code> で変換され、 <code>filter</code>
に送られます。</p></div>
</div>
<div class="sect3">
<h4 id="_チェックイン_チェックアウト属性が異なるブランチをマージする">チェックイン/チェックアウト属性が異なるブランチをマージする</h4>
<div class="paragraph"><p>clean/smudge フィルターや text/eol/ident
属性の追加など、そのファイルの正規リポジトリ形式を変更する属性をファイルに追加した場合、属性が配置されていない場所で何かをマージすると、通常、マージの競合が発生します。</p></div>
<div class="paragraph"><p>これらの不必要なマージの競合を防ぐために、Gitは、 <code>merge.renormalize</code>
構成変数を設定することにより、3方向マージを解決するときに、ファイルの3つのステージすべての仮想チェックアウトとチェックインを実行するように指示できます。これにより、チェックイン変換によって引き起こされた変更によって、変換されたファイルが変換されていないファイルとマージされるときに、誤ったマージの競合が発生するのを防ぐことができます。</p></div>
<div class="paragraph"><p>「smudge→clean」の結果がすでに汚されている(smudged)ファイルでも「clean」と同じ出力になる限り、この戦略はすべてのフィルター関連の競合を自動的に解決します。このように機能しないフィルターは、手動で解決する必要がある追加のマージ競合を引き起こす可能性があります。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_generating_diff_text">Generating diff text</h3>
<div class="sect3">
<h4 id="_code_diff_code"><code>diff</code></h4>
<div class="paragraph"><p>属性 <code>diff</code>
は、Gitが特定のファイルのdiffを生成する方法に影響を与えます。パスのテキストパッチを生成するか、パスをバイナリファイルとして扱うかをGitに指示できます。
また、ハンクヘッダーの <code>@@ -k,l +n,m @@</code>
行に表示される行に影響を与えたり、外部コマンドを使用して差分を生成するようにGitに指示したり、差分を生成する前にバイナリファイルをテキスト形式に変換するようにGitに依頼したりすることもできます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
set(設定)
</dt>
<dd>
<p>
        <code>diff</code> 属性が設定されているパスは、NULなどのテキストファイルには通常表示されないバイト値が含まれている場合でも、テキストとして扱われます。
</p>
</dd>
<dt class="hdlist1">
unset(設定解除)
</dt>
<dd>
<p>
        <code>diff</code> 属性が設定されていないパスは、 <code>Binary files differ</code> (バイナリファイル差分)
        (または、バイナリパッチが有効になっている場合、バイナリパッチ) を生成します。
</p>
</dd>
<dt class="hdlist1">
unspecified(未指定)
</dt>
<dd>
<p>
        <code>diff</code> 属性が指定されていないパスは、最初にその内容が検査され、テキストのように見え、 core.bigFileThreshold
        よりも小さい場合は、テキストとして扱われます。さもなければ <code>Binary files differ</code> (バイナリファイル差分) が生成されます。
</p>
</dd>
<dt class="hdlist1">
String(文字列値)
</dt>
<dd>
<p>
        指定されたdiffドライバーを使用してdiffが表示されます。以下のセクションで説明するように、各ドライバーは1つ以上のオプションを指定できます。diffドライバー「foo」のオプションは、Git構成ファイルの「diff.foo」セクションの構成変数によって定義されます。
</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="_外部diffドライバーの定義">外部diffドライバーの定義</h4>
<div class="paragraph"><p>diffドライバの定義は <code>gitattributes</code> ファイルではなく <code>gitconfig</code>
で行われるため、厳密に言えば、このマニュアルページはそれについて話すのには間違った場所はありますが…</p></div>
<div class="paragraph"><p>外部diffドライバー <code>jcdiff</code> を定義するには、以下のように <code>$GIT_DIR/config</code> ファイル(または
<code>$HOME/.gitconfig</code> ファイル)にセクションを追加します:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>[diff "jcdiff"]
        command = j-c-diff</code></pre>
</div></div>
<div class="paragraph"><p>Git は <code>diff</code> 属性が <code>jcdiff</code> に設定されているパスの diff を表示する必要がある場合、上記の設定で指定したコマンド、つまり
<code>j-c-diff</code> を 7 つのパラメータで、 <code>GIT_EXTERNAL_DIFF</code> プログラムが呼ばれるのと同じように呼び出します。 詳しくは
<a href="git.html">git(1)</a> を参照してください。</p></div>
</div>
<div class="sect3">
<h4 id="_defining_a_custom_hunk_header">Defining a custom hunk-header</h4>
<div class="paragraph"><p>テキストdiff出力の変更の各グループ(ハンク(hunk)と呼ばれます)には、以下の形式の行が接頭辞として付けられます:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>@@ -k,l +n,m @@ TEXT</code></pre>
</div></div>
<div class="paragraph"><p>これはハンクヘッダー(hunk header)と呼ばれます。 "TEXT"
の部分は、デフォルトでは、アルファベットまたは、アンダースコア(<code>_</code>)または、ドル記号(<code>$</code>)で始まる行です。 これは、GNU <em>diff -p</em>
出力が使用するものとマッチします。ただし、このデフォルトの選択は一部のコンテンツには適していないため、カスタマイズされたパターンを使用して選択を行うことができます。</p></div>
<div class="paragraph"><p>最初に、 .gitattributesで、パスに <code>diff</code> 属性を割り当てます。</p></div>
<div class="listingblock">
<div class="content">
<pre><code>*.tex   diff=tex</code></pre>
</div></div>
<div class="paragraph"><p>次に、 <code>diff.tex.xfuncname</code> 構成を定義して、ハンクヘッダー "TEXT"
として表示する行にマッチする正規表現を指定します。以下のように、 <code>$GIT_DIR/config</code> ファイル(または
<code>$HOME/.gitconfig</code> ファイル)にセクションを追加します:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>[diff "tex"]
        xfuncname = "^(\\\\(sub)*section\\{.*)$"</code></pre>
</div></div>
<div class="paragraph"><p>注意: 単一レベルのバックスラッシュは構成ファイルパーサーによって使用されるため、バックスラッシュを2重にする必要があります。
上記のパターンは、バックスラッシュで始まり、行の終わりまで、 <code>sub</code> 、 <code>section</code> 、 <code>{</code> の順に0回以上出現する行を選択します。</p></div>
<div class="paragraph"><p>これを簡単にするための組み込みパターンがいくつかあり、 <code>tex</code> はその1つであるため、構成ファイルに上記を書き込む必要はありません(これは、
<code>.gitattributes</code> を介して属性メカニズムで有効にする必要があります)。以下の組み込みパターンを使用できます:</p></div>
<div class="ulist"><ul>
<li>
<p>
<code>ada</code> はAda言語のソースコードに適しています。
</p>
</li>
<li>
<p>
<code>bash</code> はBourne-Againシェル言語(bash)のソースコードに適しています。POSIXシェル関数定義のスーパーセットをカバーしています。
</p>
</li>
<li>
<p>
<code>bibtex</code> はBibTeXでコード化されたリファレンスを持つファイルに適しています。
</p>
</li>
<li>
<p>
<code>cpp</code> はC言語とC++言語のソースコードに適しています。
</p>
</li>
<li>
<p>
<code>csharp</code> はC#言語のソースコードに適しています。
</p>
</li>
<li>
<p>
<code>css</code> はCSS(cascading style sheets)に適しています。
</p>
</li>
<li>
<p>
<code>dts</code> は devicetree (DTS) ファイルに適しています。
</p>
</li>
<li>
<p>
<code>elixir</code> はElixir言語のソースコードに適しています。
</p>
</li>
<li>
<p>
<code>fortran</code> はFORTRAN言語のソースコードに適しています。
</p>
</li>
<li>
<p>
<code>fountain</code> はFountain文書に適しています。
</p>
</li>
<li>
<p>
<code>golang</code> はGo言語のソースコードに適しています。
</p>
</li>
<li>
<p>
<code>html</code> は HTML/XHTML 文書に適しています。
</p>
</li>
<li>
<p>
<code>java</code> はJava言語のソースコードに適しています。
</p>
</li>
<li>
<p>
<code>markdown</code> はMarkdown文書に適しています。
</p>
</li>
<li>
<p>
<code>matlab</code> はMATLABとOctave言語のソースコードに適しています。
</p>
</li>
<li>
<p>
<code>objc</code> はObjective-C言語のソースコードに適しています。
</p>
</li>
<li>
<p>
<code>pascal</code> は Pascal/Delphi 言語のソースコードに適しています。
</p>
</li>
<li>
<p>
<code>perl</code> はPerl言語のソースコードに適しています。
</p>
</li>
<li>
<p>
<code>php</code> はPHP言語のソースコードに適しています。
</p>
</li>
<li>
<p>
<code>python</code> はPython言語のソースコードに適しています。
</p>
</li>
<li>
<p>
<code>ruby</code> はRuby言語のソースコードに適しています。
</p>
</li>
<li>
<p>
<code>rust</code> はRust言語のソースコードに適しています。
</p>
</li>
<li>
<p>
<code>scheme</code> はScheme言語のソースコードに適しています。
</p>
</li>
<li>
<p>
<code>tex</code> はLaTeX文書のソースコードに適しています。
</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_customizing_word_diff">Customizing word diff</h4>
<div class="paragraph"><p><code>diff.*.wordRegex</code> 構成変数で適切な正規表現を指定することにより、 <code>git diff --word-diff</code>
が単語を1行に分割するために使用するルールをカスタマイズできます。たとえば、TeXでは、バックスラッシュとそれに続く一連の文字がコマンドを形成しますが、そのようなコマンドのいくつかは、空白を介さずに一緒に実行できます。それらを分離するには、以下のように
<code>$GIT_DIR/config</code> ファイル(または <code>$HOME/.gitconfig</code> ファイル)で正規表現を使用します:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>[diff "tex"]
        wordRegex = "\\\\[a-zA-Z]+|[{}]|\\\\.|[^\\{}[:space:]]+"</code></pre>
</div></div>
<div class="paragraph"><p>前のセクションにリストされているすべての言語には組み込みのパターンが用意されています。</p></div>
</div>
<div class="sect3">
<h4 id="_バイナリファイルのテキスト差分の取得">バイナリファイルのテキスト差分の取得</h4>
<div class="paragraph"><p>一部のバイナリファイルのテキスト変換バージョンの差分を確認することが望ましい場合があります。たとえば、ワードプロセッサ文書をASCIIテキスト表現に変換し、テキストの差分を表示することができます。この変換によって一部の情報が失われますが、結果のdiffは人間が見るのに役立ちます(ただし、直接適用(apply)することはできません)。</p></div>
<div class="paragraph"><p><code>textconv</code>
configオプションは、そのような変換を実行するためのプログラムを定義するために使用されます。プログラムは、変換するファイルの名前である単一の引数を取り、結果のテキストをstdoutに生成する必要があります。</p></div>
<div class="paragraph"><p>たとえば、バイナリ情報の代わりにファイルのexif情報の差分を表示するには(exifツールがインストールされていると仮定して)、以下のセクションを
<code>$GIT_DIR/config</code> ファイル(または `$HOME/.gitconfig ファイル)に追加します:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>[diff "jpg"]
        textconv = exif</code></pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">テキスト変換は通常、一方向の変換です。この例では、実際の画像コンテンツを失い、テキストデータのみに焦点を当てています。これは、textconvによって生成されたdiffが適用(apply)に適していないことを意味します。このため、テキスト変換を実行するのは、
<code>git diff</code> と <code>git log</code> ファミリーのコマンド(つまり、log、whatchanged、show)のみです。 <code>git
format-patch</code>
はこの出力を生成しません。バイナリファイルのテキスト変換された差分を誰かに送信したい場合(たとえば、行った変更をすばやく伝達するため)、それを別個に生成し、送信する通常のバイナリ差分に加えてコメントとして送信する必要があります。</td>
</tr></table>
</div>
<div class="paragraph"><p>特に <code>git log -p</code>
を使用して大量のテキスト変換を行う場合、テキスト変換が遅くなる可能性があるため、Gitは出力をキャッシュし、将来の差分で使用するメカニズムを提供します。
キャッシュを有効にするには、diffドライバーの構成で「cachetextconv」変数を設定します。 例えば:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>[diff "jpg"]
        textconv = exif
        cachetextconv = true</code></pre>
</div></div>
<div class="paragraph"><p>これにより、各ブロブで「exif」を実行した結果が無期限にキャッシュされます。diffドライバーのtextconv構成変数を変更すると、Gitはキャッシュエントリを自動的に無効にし、textconvフィルターを再実行します。キャッシュを手動で無効にしたい場合(たとえば、「exif」のバージョンが更新され、より良い出力が生成されようになった等)、
<code>git update-ref -d refs/notes/textconv/jpg</code> を使用してキャッシュを手動で削除できます(
ここで、「jpg」は上記の例のように、diffドライバーの名前です)。</p></div>
</div>
<div class="sect3">
<h4 id="_textconvと外部diffの選択">textconvと外部diffの選択</h4>
<div class="paragraph"><p>あなたがリポジトリ内のバイナリまたは特別にフォーマットされたブロブの違いを表示したい場合は、外部のdiffコマンドを使用するか、textconvを使用してそれらを差分可能(diff-able)なテキストフォーマットに変換するかを選択できます。どちらの方法を選択するかは、状況に完全に依存します。</p></div>
<div class="paragraph"><p>外部diffコマンドを使用する利点は、柔軟性です。行指向の変更を見つける必要はありません。また、出力が統一されたdiff(unified
diff)に似ている必要もありません。あなたはあなたのデータ形式に最も適した方法で変更を自由に見つけて報告できます。</p></div>
<div class="paragraph"><p>それと比較すると、textconvははるかに制限的です。データを行指向のテキスト形式に変換すると、Gitは通常のdiffツールを使用して出力を生成します。この方法を選択することにはいくつかの利点があります:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
容易に使えます。多くの場合、独自の差分を実行するよりも、バイナリからテキストへの変換を作成する方がはるかに簡単です。多くの場合、既存のプログラム(つまり
   exif や odt2txt)をtextconvフィルターとして使用できます。
</p>
</li>
<li>
<p>
Gitのdiff機能。変換ステップのみを自分で実行することで、カラー化、単語diff、マージ用の複合diffなど、Gitのdiff機能の多くを引き続き利用できます。
</p>
</li>
<li>
<p>
キャッシュ機能。 textconvキャッシングは、 <code>git log -p</code> を実行してトリガーするような、繰り返されるdiffを高速化できます。
</p>
</li>
</ol></div>
</div>
<div class="sect3">
<h4 id="_ファイルをバイナリとしてマークする">ファイルをバイナリとしてマークする</h4>
<div class="paragraph"><p>Gitは通常、コンテンツの先頭を調べることで、ブロブにテキストデータとバイナリデータのどちらが含まれているかを正しく推測します。ただし、ブロブにファイルの後半にバイナリデータが含まれている、またはコンテンツが技術的にはテキスト文字で構成されているものの、人間の読者には不明瞭であるために、あなたは、その推測を上書きしたい場合があります。たとえば、多くのポストスクリプトファイルにはASCII文字しか含まれていません(つまりテキストデータです)が、ノイズが多く意味のないdiffが生成されます。</p></div>
<div class="paragraph"><p>ファイルをバイナリとしてマークする最も簡単な方法は、 <code>.gitattributes</code> ファイルでdiff属性を設定解除(unset)することです。</p></div>
<div class="listingblock">
<div class="content">
<pre><code>*.ps -diff</code></pre>
</div></div>
<div class="paragraph"><p>これにより、Gitは通常の差分ではなく <code>Binary files differ</code>
(バイナリファイルの差分)(またはバイナリパッチが有効になっている場合はバイナリパッチ)を生成します。</p></div>
<div class="paragraph"><p>しかしながら、他のdiffドライバー属性を指定することもできます。 たとえば、 <code>textconv</code>
を使用してポストスクリプトファイルをASCII表現に変換し、人間が表示できるようにしたい場合があるけども、それ以外の場合はバイナリファイルとして扱いたいとします。
<code>-diff</code> 属性 と <code>diff=ps</code> 属性の両方を指定することはできません。 解決策は、 <code>diff.*.binary</code>
構成オプションを使用することです:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>[diff "ps"]
  textconv = ps2ascii
  binary = true</code></pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_performing_a_three_way_merge">Performing a three-way merge</h3>
<div class="sect3">
<h4 id="_code_merge_code"><code>merge</code></h4>
<div class="paragraph"><p>属性 <code>merge</code> は、 <code>git merge</code> 中にファイルレベルのマージが必要な場合にファイルの3つのバージョンをマージする方法や、 <code>gitr
evert</code> や <code>git cherry-pick</code> などの他のコマンドに、影響します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
set(設定)
</dt>
<dd>
<p>
        組み込みの３方向マージドライバーは、 <code>RCS</code> スイートの <em>merge</em>
        コマンドと同様の方法でコンテンツをマージするために使用されます。これは通常のテキストファイルに適しています。
</p>
</dd>
<dt class="hdlist1">
unset(設定解除)
</dt>
<dd>
<p>
        現在のブランチのバージョンを暫定的なマージ結果として取得し、マージに競合があることを宣言します。これは、明確に定義されたマージセマンティクスを持たないバイナリファイルに適しています。
</p>
</dd>
<dt class="hdlist1">
unspecified(未指定)
</dt>
<dd>
<p>
        デフォルトでは、これは <code>merge</code> 属性が設定されている場合と同じ組み込みの３方向マージドライバーを使用します。 ただし、
        <code>merge.default</code> 構成変数は、 <code>merge</code>
        属性未指定(unspecified)のパスで使用される別のマージドライバーに名前を付けることができます。
</p>
</dd>
<dt class="hdlist1">
String(文字列値)
</dt>
<dd>
<p>
        3方向マージは、指定のカスタムマージドライバーを使用して実行されます。組み込みの3方向マージドライバーは、「text」ドライバーを要求することで明示的に指定できます。
        現在のブランチを取得する組み込みドライバーは、「binary」を要求することで指定できます。
</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="_built_in_merge_drivers">Built-in merge drivers</h4>
<div class="paragraph"><p><code>merge</code> 属性を介して要求できる、いくつかの組み込みの低レベルのマージドライバーが定義されています。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
text
</dt>
<dd>
<p>
        テキストファイルの通常の3方向ファイルレベルのマージ。 競合する領域は、競合マーカー <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code> と <code>=======</code> と <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>
        でマークされます。ブランチのバージョンは <code>=======</code> マーカーの前に表示され、マージされたブランチのバージョンは <code>=======</code>
        マーカーの後に表示されます。
</p>
</dd>
<dt class="hdlist1">
binary
</dt>
<dd>
<p>
        ブランチのバージョンを作業ツリーに保持しますが、ユーザーが整理できるようにパスを競合状態のままにします。
</p>
</dd>
<dt class="hdlist1">
union
</dt>
<dd>
<p>
        テキストファイルに対して3方向のファイルレベルのマージを実行しますが、競合マーカーを残すのではなく、両方のバージョンから行を取得します。これにより、結果のファイルに追加された行がランダムな順序で残る傾向があり、ユーザーは結果を確認すべきです。影響を理解していない場合は、これを使用してはいけません。
</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="_defining_a_custom_merge_driver">Defining a custom merge driver</h4>
<div class="paragraph"><p>マージドライバの定義は、 <code>gitattributes</code> ファイルではなく <code>.git/config</code>
ファイルで行われるため、厳密に言えば、このマニュアルページはそれについて話すのに間違った場所ではありますが…</p></div>
<div class="paragraph"><p>カスタムマージドライバー <code>filfre</code> を定義するには、以下のように <code>$GIT_DIR/config</code> ファイル(または
<code>$HOME/.gitconfig</code> ファイル)にセクションを追加します:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>[merge "filfre"]
        name = feel-free merge driver
        driver = filfre %O %A %B %L %P
        recursive = binary</code></pre>
</div></div>
<div class="paragraph"><p><code>merge.*.name</code> 変数は、ドライバーに人間が読める名前を付けます。</p></div>
<div class="paragraph"><p><code>merge.*.driver</code>
変数の値は、祖先のバージョン(<code>%O</code>)と、現在のバージョン(<code>%A</code>)と、他のブランチのバージョン(<code>%B</code>)をマージするために実行するコマンドを作成するために使用されます。これらの3つのトークンは、コマンドラインの構築時にこれらのバージョンの内容を保持する一時ファイルの名前に置き換えられます。さらに、
<code>%L</code> は競合マーカーのサイズに置き換えられます(以下を参照)。</p></div>
<div class="paragraph"><p>マージドライバーは、マージの結果を <code>%A</code>
という名前のファイルに上書きして残し、それらを正常にマージできた場合はゼロステータスで終了し、競合があった場合は非ゼロで終了することが期待されます。</p></div>
<div class="paragraph"><p><code>merge.*.recursive</code>
変数は、複数の祖先が存在する場合に、共通の祖先間の内部マージのためにマージドライバーが呼び出されるときに使用する他のマージドライバーを指定します。指定しない場合、ドライバー自体が内部マージと最終マージの両方に使用されます。</p></div>
<div class="paragraph"><p>マージドライバーは、プレースホルダー <code>%P</code> を介して、マージされた結果が格納されるパス名を知ります。</p></div>
</div>
<div class="sect3">
<h4 id="_code_conflict_marker_size_code"><code>conflict-marker-size</code></h4>
<div class="paragraph"><p>この属性は、競合するマージ中に作業ツリーファイルに残る競合マーカーの長さを制御します。値を正の整数に設定するだけで、意味のある効果があります。</p></div>
<div class="paragraph"><p>たとえば、 ファイル <code>Documentation/git-merge.txt</code> の結果をマージすると競合するときに、<code>.gitattributes</code>
で(通常の7文字の長さではなく)はるかに長い競合マーカーを残すようにマージ機構に指示できます。</p></div>
<div class="listingblock">
<div class="content">
<pre><code>Documentation/git-merge.txt     conflict-marker-size=32</code></pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_checking_whitespace_errors">Checking whitespace errors</h3>
<div class="sect3">
<h4 id="_code_whitespace_code"><code>whitespace</code></h4>
<div class="literalblock">
<div class="content">
<pre><code> `core.whitespace` 設定変数を使用すると、プロジェクト内のすべてのパスに対して 'diff' と 'apply'
が空白エラー(whitespace errors)をどうみなすかを定義します(linkgit:git-config[1]
を参照)。この属性では、あなたはパスごとに細かく制御できます。</code></pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
set(設定)
</dt>
<dd>
<p>
        Gitでチェックできる全てのタイプの潜在的な空白エラーを通知します。タブ幅は <code>core.whitespace</code> 構成変数の値から取得されます。
</p>
</dd>
<dt class="hdlist1">
unset(設定解除)
</dt>
<dd>
<p>
        何もエラーとして通知しません。
</p>
</dd>
<dt class="hdlist1">
unspecified(未指定)
</dt>
<dd>
<p>
        <code>core.whitespace</code> 構成変数の値を使用して、エラーとして通知する内容を決定します。
</p>
</dd>
<dt class="hdlist1">
String(文字列値)
</dt>
<dd>
<p>
        <code>core.whitespace</code> 構成変数と同じ形式で、通知すべき一般的な空白の問題のコンマ区切りリストを指定します。
</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_an_archive">Creating an archive</h3>
<div class="sect3">
<h4 id="_code_export_ignore_code"><code>export-ignore</code></h4>
<div class="paragraph"><p>属性 <code>export-ignore</code> を持つファイルとディレクトリはアーカイブファイルに追加されません。</p></div>
</div>
<div class="sect3">
<h4 id="_code_export_subst_code"><code>export-subst</code></h4>
<div class="paragraph"><p>属性 <code>export-subst</code>
がファイルに設定されている場合、Gitはこのファイルをアーカイブに追加するときにいくつかのプレースホルダーを展開します。展開は、コミットIDの可用性に依存します。たとえば
<a href="git-archive.html">git-archive(1)</a> にコミットやタグの代わりにツリーが与えられている場合、置換は行われません。プレースホルダーは、
<a href="git-log.html">git-log(1)</a> のオプション <code>--pretty=format:</code> のプレースホルダーと同じですが、ファイル内で
<code>$Format:PLACEHOLDERS$</code> のようにラップする必要がある点が異なります。 例えば、 文字列 <code>$Format:%H$</code>
は、コミットハッシュに置き換えられます。ただし、DoS攻撃(denial-of-service attacks)を回避するために、アーカイブごとに1つの
<code>%(describe)</code> プレースホルダーのみが展開されます。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_packing_objects">Packing objects</h3>
<div class="sect3">
<h4 id="_code_delta_code"><code>delta</code></h4>
<div class="paragraph"><p>属性 <code>delta</code> がfalseに設定されているパスのブロブに対して、デルタ圧縮は試行されません。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_viewing_files_in_gui_tools">Viewing files in GUI tools</h3>
<div class="sect3">
<h4 id="_code_encoding_code"><code>encoding</code></h4>
<div class="paragraph"><p>この属性の値は、関連するファイルの内容を表示するためにGUIツール(<a href="gitk.html">gitk(1)</a> や <a href="git-gui.html">git-gui(1)</a>
など)で使用される文字エンコードを指定します。注意: パフォーマンス上の考慮事項により、 <a href="gitk.html">gitk(1)</a>
は、オプションでファイルごとのエンコーディングを手動で有効にしない限り、この属性を使用しないことに注意してください。</p></div>
<div class="paragraph"><p>この属性が設定されていないか、値が無効な場合は、代わりに <code>gui.encoding</code>
構成変数の値が使用されます(<a href="git-config.html">git-config(1)</a> を参照)。</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_macro_attributes">USING MACRO ATTRIBUTES</h2>
<div class="sectionbody">
<div class="paragraph"><p>追跡中のバイナリファイルに、行末変換を適用したり、テキストの差分を作成したりする必要はありません。あなたは、たとえば以下のように指定する必要があります。</p></div>
<div class="listingblock">
<div class="content">
<pre><code>*.jpg -text -diff</code></pre>
</div></div>
<div class="paragraph"><p>しかし、多くの属性がある場合、これはめんどくさいです。マクロ属性を使用すると、あなたは設定時に他の多くの属性を同時に設定または設定解除する属性を定義できます。システムは、組み込みのマクロ属性
<code>binary</code> を認識します:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>*.jpg binary</code></pre>
</div></div>
<div class="paragraph"><p>「binary」属性を設定すると、上記のように「text」属性と「diff」属性の設定も解除されます。マクロ属性は「set」のみであることに注意してください。ただし、1つを設定すると、他の属性をsetまたはunsetしたり、他の属性を「Unspecified」状態に戻したりする事があります。</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_defining_macro_attributes">DEFINING MACRO ATTRIBUTES</h2>
<div class="sectionbody">
<div class="paragraph"><p>カスタムマクロ属性は、最上位のgitattributesファイル(<code>$GIT_DIR/info/attributes</code> または、作業ツリーの最上位にある
` .gitattributes`
ファイルまたは、グローバルgitattributesファイルまたは、システム全体のgitattributesファイル)でのみ定義でき、作業ツリーサブディレクトリの
<code>.gitattributes</code> ファイルでは定義できません。 組み込みのマクロ属性「binary」は、以下のものと同等です:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>[attr]binary -diff -merge -text</code></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_notes">NOTES</h2>
<div class="sectionbody">
<div class="paragraph"><p>作業ツリーの <code>.gitattributes</code> ファイルにアクセスするとき、Gitはシンボリックリンクをたどりません。
これにより、ファイルシステムからではなく、インデックスまたはツリーからファイルにアクセスする場合の動作の一貫性が保たれます。</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="paragraph"><p>これらの以下の3つの <code>gitattributes</code> ファイルがある場合:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>(in $GIT_DIR/info/attributes)

a*      foo !bar -baz

(in .gitattributes)
abc     foo bar baz

(in t/.gitattributes)
ab*     merge=filfre
abc     -foo -bar
*.c     frotz</code></pre>
</div></div>
<div class="paragraph"><p>パス <code>t/abc</code> に与えられる属性は、以下のように計算されます:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
(問題のパスと同じディレクトリにある) <code>t/.gitattributes</code> を調べることにより、Gitは最初の行が一致することを検出します。
   <code>merge</code> 属性が設定されます。 また、2行目が一致し、属性 <code>foo</code> と `bar`が設定解除(unseet)されていることもわかります。
</p>
</li>
<li>
<p>
次に (親ディレクトリにある) <code>.gitattributes</code> を調べ、最初の行がマッチすることを確認します。しかし、
   <code>t/.gitattributes</code>  ファイルでは、このパスに対して <code>merge</code> や <code>foo</code> や <code>bar</code>
   属性をどのように与えるべきかを既に決めているので、<code>foo</code> と <code>bar</code> は設定解除(unset)のままにしています。属性 <code>baz</code>
   がsetされます。
</p>
</li>
<li>
<p>
最後に、 <code>$GIT_DIR/info/attributes</code>
   を調べます。このファイルは、ツリー内の設定を上書きするために使用されます。最初の行がマッチして <code>foo</code> がsetされ、 <code>bar</code>
   が指定解除(unset)の状態に戻され、 <code>baz</code> が設定解除(unset)されます。
</p>
</li>
</ol></div>
<div class="paragraph"><p>その結果、 <code>t/abc</code> への属性の割り当ては以下のようになります:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>foo     set to true
bar     unspecified
baz     set to false
merge   set to string value "filfre"
frotz   unspecified</code></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph"><p><a href="git-check-attr.html">git-check-attr(1)</a>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_git">GIT</h2>
<div class="sectionbody">
<div class="paragraph"><p>Part of the <a href="git.html">git(1)</a> suite</p></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated
 2022-02-21 08:10:14 JST
</div>
</div>
</body>
</html>
