<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 9.1.1" />
<title>githooks(5)</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overridden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install();
/*]]>*/
</script>
</head>
<body class="manpage">
<div id="header">
<h1>
githooks(5) Manual Page
</h1>
<h2>NAME</h2>
<div class="sectionbody">
<p>githooks -
   Gitで使われるフック
</p>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph"><p>$GIT_DIR/hooks/* (or `git config core.hooksPath`/*)</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph"><p>フック(hook)は、フックディレクトリ(hooks directory)に配置して、gitの実行の特定の時点でアクションをトリガーできるプログラムです。実行可能ビットが設定されていないフックは無視されます。</p></div>
<div class="paragraph"><p>デフォルトでは、フックディレクトリ(ooks directory)は <code>$GIT_DIR/hooks</code> ですが、これは <code>core.hooksPath</code> 構成変数を介して変更できます(<a href="git-config.html">git-config(1)</a> を参照)。</p></div>
<div class="paragraph"><p>Gitはフックを呼び出す前に、ベアリポジトリでは作業ディレクトリを $GIT_DIRに変更し、非ベアリポジトリではの作業ディレクトリを作業ツリーのルートに変更します。例外は、プッシュ中にトリガーされるフック(<code>pre-receive</code>, <code>update</code>, <code>post-receive</code>, <code>post-update</code>, <code>push-to-checkout</code>)で、常に $GIT_DIR で実行されます。</p></div>
<div class="paragraph"><p>Environment variables, such as <code>GIT_DIR</code>, <code>GIT_WORK_TREE</code>, etc., are exported so that Git commands run by the hook can correctly locate the repository. If your hook needs to invoke Git commands in a foreign repository or in a different working tree of the same repository, then it should clear these environment variables so they do not interfere with Git operations at the foreign location. For example:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>local_desc=$(git describe)
foreign_desc=$(unset $(git rev-parse --local-env-vars); git -C ../foreign-repo describe)</code></pre>
</div></div>
<div class="paragraph"><p>フックは、環境変数やコマンドライン引数やstdinを介して引数を取得できます。詳細については、以下の各フックのドキュメントを参照してください。</p></div>
<div class="paragraph"><p><code>git init</code> は、その構成に応じて、フックを新しいリポジトリにコピーする場合があります。詳細については、 <a href="git-init.html">git-init(1)</a> の「TEMPLAT EDIRECTORY」セクションを参照してください。このドキュメントの残りの部分で「デフォルトのフック」について言及している場合は、Gitに付属しているデフォルトのテンプレートについて説明しています。</p></div>
<div class="paragraph"><p>現在サポートされているフックを以下に説明します。</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_hooks">HOOKS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_applypatch_msg">applypatch-msg</h3>
<div class="paragraph"><p>このフックは <a href="git-am.html">git-am(1)</a> によって呼び出されます。単一のパラメータとして、提案するコミットログメッセージを保持するファイルの名前を取ります。ゼロ以外のステータスで終了すると、パッチを適用する前に <code>git am</code> が中止されます。</p></div>
<div class="paragraph"><p>フックを使用すると、メッセージファイルを所定の場所で編集でき、メッセージをプロジェクトの標準形式に正規化するために使用できます。 また、メッセージファイルを検査した後にコミットを拒否するために使用することもできます。</p></div>
<div class="paragraph"><p>デフォルトの <code>applypatch-msg</code> フックが有効になっている場合に <code>commit-msg</code> フックが有効になっていれば、 <code>commit-msg</code> フックを実行します。</p></div>
</div>
<div class="sect2">
<h3 id="_pre_applypatch">pre-applypatch</h3>
<div class="paragraph"><p>このフックは <a href="git-am.html">git-am(1)</a> によって呼び出されます。これはパラメーターを受け取らず、パッチが適用された後、コミットが行われる前に呼び出されます。</p></div>
<div class="paragraph"><p>これがゼロ以外のステータスで終了する場合、パッチの適用後に作業ツリーはコミットされません。</p></div>
<div class="paragraph"><p>現在の作業ツリーを検査し、特定のテストに合格しない場合はコミットを拒否するために使用できます。</p></div>
<div class="paragraph"><p>デフォルトの <code>pre-applypatch</code> フックが有効になっている場合に <code>pre-commit</code> フックが有効になっている場合は、 <code>pre-commit</code> フックが実行されます。</p></div>
</div>
<div class="sect2">
<h3 id="_post_applypatch">post-applypatch</h3>
<div class="paragraph"><p>このフックは <a href="git-am.html">git-am(1)</a> によって呼び出されます。これはパラメーターを受け取らず、パッチが適用されてコミットが行われた後に呼び出されます。</p></div>
<div class="paragraph"><p>このフックは主に通知用であり、 <code>git am</code> の結果に影響を与えることはできません。</p></div>
</div>
<div class="sect2">
<h3 id="_pre_commit">pre-commit</h3>
<div class="paragraph"><p>このフックは <a href="git-commit.html">git-commit(1)</a> によって呼び出され、 <code>--no-verify</code> オプションでバイパスできます。パラメータを必要とせず、提案したコミットログメッセージを取得してコミットする前に呼び出されます。このスクリプトをゼロ以外のステータスで終了すると、コミットを作成する前に <code>git commit</code> コマンドが中止(abort)されます。</p></div>
<div class="paragraph"><p>デフォルトの <code>pre-commit</code> フックを有効にすると、末尾に空白がある行の導入をキャッチし、そのような行が見つかるとコミットを中止(abort)します。</p></div>
<div class="paragraph"><p>すべての <code>git commit</code> フックは環境変数 $GIT_EDITOR を <code>GIT_EDITOR=:</code> とすれば、 コミットメッセージを変更するためのエディターを起動しません。</p></div>
<div class="paragraph"><p>デフォルトの <code>pre-commit</code> フックが有効になっていて、かつ、 <code>hooks.allownonascii</code> 構成オプションが設定されていないかfalseに設定されている場合、非ASCIIファイル名の使用を防止します。</p></div>
</div>
<div class="sect2">
<h3 id="_pre_merge_commit">pre-merge-commit</h3>
<div class="paragraph"><p>このフックは <a href="git-merge.html">git-merge(1)</a> によって呼び出され、 <code>--no-verify</code> オプションでバイパスできます。パラメータを必要とせず、マージが正常に実行された後、提案したコミットログメッセージを取得してコミットする前に呼び出されます。このスクリプトをゼロ以外のステータスで終了すると、コミットを作成する前に <code>git merge</code> コマンドが中止(abort)されます。</p></div>
<div class="paragraph"><p>デフォルトの <code>pre-merge-commit</code> フックが有効になっている場合に <code>pre-commit</code> フック後者が有効になっている場合は、 <code>pre-commit</code> フックが実行されます。</p></div>
<div class="paragraph"><p>このフックは環境変数 $GIT_EDITOR を <code>GIT_EDITOR=:</code> とすれば、 コミットメッセージを変更するためのエディターを起動しません。</p></div>
<div class="paragraph"><p>マージを自動的に実行できない場合は、競合を解決し、結果を個別にコミットする必要があります(<a href="git-merge.html">git-merge(1)</a> 参照)。その時点では、このフックは実行されませんが、 <code>pre-commit</code> が有効になっている場合は <code>pre-commit</code> フックが実行されます。</p></div>
</div>
<div class="sect2">
<h3 id="_prepare_commit_msg">prepare-commit-msg</h3>
<div class="paragraph"><p>このフックは、デフォルトのログメッセージを準備した直後、エディターを起動する前に、 <a href="git-commit.html">git-commit(1)</a> によって呼び出されます。</p></div>
<div class="paragraph"><p>1つから3つのパラメーターを取ります。 1つ目は、内容がコミットログメッセージであるファイルの名前です。2番目はコミットメッセージのソースであり、<code>message</code>(<code>-m</code> または <code>-F</code> オプションが指定された場合)、 <code>template</code>( <code>-t</code> オプションが指定された場合、または構成オプション <code>commit.template</code> が設定されている場合)、 <code>merge</code>(コミットがマージであるか、 <code>.git/MERGE_MSG</code> ファイルが存在する場合)、 <code>squash</code>( <code>.git/SQUASH_MSG</code> ファイルが存在する場合)、または <code>commit</code>( <code>-c</code> または <code>-C</code> または <code>--amend</code> オプションが指定された場合)に続いて(3つ目のパラメータとして) commitオブジェクト名。</p></div>
<div class="paragraph"><p>終了ステータスがゼロ以外の場合、 <code>git commit</code> は中止(abort)されます。</p></div>
<div class="paragraph"><p>フックの目的は、メッセージファイルを所定の位置で編集することであり、 <code>--no-verify</code> オプションによって抑制されることはありません。ゼロ以外ステータスでの終了は、フックの失敗を意味し、コミットを中止(abort)します。pre-commitフックの代わりとして使用すべきではありません。</p></div>
<div class="paragraph"><p>Gitに付属するサンプルの <code>prepare-commit-msg</code> フックは、コミットテンプレートのコメント部分にあるヘルプメッセージを削除します。</p></div>
</div>
<div class="sect2">
<h3 id="_commit_msg">commit-msg</h3>
<div class="paragraph"><p>このフックは <a href="git-commit.html">git-commit(1)</a> と <a href="git-merge.html">git-merge(1)</a> によって呼び出され、 <code>--no-verify</code> オプションでバイパスできます。単一のパラメータとして提案されたコミットログメッセージを保持するファイルの名前を取ります。ゼロ以外のステータスで終了すると、コマンドは中止(abort)されます。</p></div>
<div class="paragraph"><p>フックを使用すると、メッセージファイルを所定の場所で編集でき、メッセージをプロジェクトの標準形式に正規化するために使用できます。 また、メッセージファイルを検査した後にコミットを拒否するために使用することもできます。</p></div>
<div class="paragraph"><p>デフォルトの <code>commit-msg</code> フックを有効にすると、重複する <code>Signed-off-by</code> トレーラーが検出され、見つかった場合はコミットが中止(abort)されます。</p></div>
</div>
<div class="sect2">
<h3 id="_post_commit">post-commit</h3>
<div class="paragraph"><p>このフックは <a href="git-commit.html">git-commit(1)</a> によって呼び出されます。パラメータを必要とせず、コミットが行われた後に呼び出されます。</p></div>
<div class="paragraph"><p>このフックは主に通知用であり、 <code>git commit</code> の結果に影響を与えることはできません。</p></div>
</div>
<div class="sect2">
<h3 id="_pre_rebase">pre-rebase</h3>
<div class="paragraph"><p>このフックは <a href="git-rebase.html">git-rebase(1)</a> によって呼び出され、ブランチがリベースされるのを防ぐために使用できます。フックは、1つまたは2つのパラメーターで呼び出すことができます。最初のパラメーターは、シリーズがフォークされたアップストリームです。2番目のパラメーターは、リベースされるブランチであり、現在のブランチをリベースするときは設定されません。</p></div>
</div>
<div class="sect2">
<h3 id="_post_checkout">post-checkout</h3>
<div class="paragraph"><p>このフックは、ワークツリーを更新した後に <a href="git-checkout.html">git-checkout(1)</a> または <a href="git-switch.html">git-switch(1)</a> が実行されたときに呼び出されます。フックには、以前のHEADのref、新しいHEADのref(変更されている場合と変更されていない場合があります)、およびチェックアウトがブランチチェックアウト(ブランチの変更、flag=1)あるいはファイルのチェックアウト(インデックスからファイルを取得、flag=0)のいずれかであるかどうかを示すフラグ、の3つのパラメーターが与えられます。このフックは、フックの終了ステータスがこれら2つのコマンドの終了ステータスになることを除いて、 <code>git switch</code> または <code>git checkout</code> の結果に影響を与えることはできません。</p></div>
<div class="paragraph"><p>これは <code>--no-checkout</code> (<code>-n</code>)オプションが使用されていない限り、 <a href="git-clone.html">git-clone(1)</a>の後でも実行されます。 フックに指定された最初のパラメーターは null-refで、2番目は新しいHEADのrefであり、フラグは常に1です。<code>--no-checkout</code> が使用されていない限り、 <code>git worktree add</code> についても同様です。</p></div>
<div class="paragraph"><p>このフックを使用して、リポジトリの有効性チェックを実行したり、以前のHEADとの違いを自動表示したり、作業ディレクトリのメタデータプロパティを設定したりできます。</p></div>
</div>
<div class="sect2">
<h3 id="_post_merge">post-merge</h3>
<div class="paragraph"><p>このフックは <a href="git-merge.html">git-merge(1)</a> によって呼び出されます。これは、ローカルリポジトリで <code>git pull</code> が実行されたときに発生します。フックは単一のパラメーター、つまり、実行されているマージがスカッシュマージ(squash merge)であるかどうかを指定するステータスフラグを受け取ります。このフックは <code>git merge</code> の結果に影響を与えることはできず、競合が原因でマージが失敗した場合は実行されません。</p></div>
<div class="paragraph"><p>このフックを対応するpre-commitフックと組み合わせて使用すると、作業ツリーに関連付けられている任意の形式のメタデータ(たとえば、権限/所有権、ACLSなど)を保存および復元できます。これを行う方法の例については、 contrib/hooks/setgitperms.perl を参照してください。</p></div>
</div>
<div class="sect2">
<h3 id="_pre_push">pre-push</h3>
<div class="paragraph"><p>このフックは <a href="git-push.html">git-push(1)</a> によって呼び出され、プッシュが行われないようにするために使用できます。フックは、宛先リモートの名前と場所を提供する2つのパラメーターで呼び出されます。名前付きリモートが使用されていない場合、両方の値は同一になります。</p></div>
<div class="paragraph"><p>何をプッシュするかについての情報は、フックの標準入力に次の形式の行で提供されます:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>&lt;local ref&gt; SP &lt;local object name&gt; SP &lt;remote ref&gt; SP &lt;remote object name&gt; LF</code></pre>
</div></div>
<div class="paragraph"><p>たとえば、コマンド <code>git push origin master:foreign</code> を実行すると、フックは以下のような行を受け取ります:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>refs/heads/master 67890 refs/heads/foreign 12345</code></pre>
</div></div>
<div class="paragraph"><p>ただし、完全なオブジェクト名が提供されます。外部参照がまだ存在しない場合、 &lt;remote object name&gt; はすべてゼロのオブジェクト名になります。refを削除する場合は、 &lt;local ref&gt; が <code>(delete)</code> として提供され、 <code>&lt;local object name&gt;</code> がすべてゼロのオブジェクト名になります。ローカルコミットが拡張可能な名前以外の名前(<code>HEAD~</code> やオブジェクト名など)で指定された場合は、最初に指定されたとおりに提供されます。</p></div>
<div class="paragraph"><p>このフックがゼロ以外のステータスで終了した場合、 <code>git push</code> は何もプッシュせずに中止(abort)します。プッシュが拒否された理由に関する情報は、標準エラーに書き込むことでユーザーに送信される場合があります。</p></div>
</div>
<div class="sect2">
<h3 id="pre-receive">pre-receive</h3>
<div class="paragraph"><p>このフックは、 <code>git push</code> に反応し、リポジトリ内の参照を更新するときに、 <a href="git-receive-pack.html">git-receive-pack(1)</a> によって呼び出されます。リモートリポジトリのrefの更新を開始する直前に、pre-receiveフックが呼び出されます。その終了ステータスによって、更新の成功または失敗が決まります。</p></div>
<div class="paragraph"><p>このフックは、受信操作に対して1回実行されます。引数は必要ありませんが、更新される各refについて、標準入力で以下の形式の行を受け取ります:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>&lt;old-value&gt; SP &lt;new-value&gt; SP &lt;ref-name&gt; LF</code></pre>
</div></div>
<div class="paragraph"><p>ここで、 <code>&lt;old-value&gt;</code> は、refに保存されている古いオブジェクト名です。 <code>&lt;new-value&gt;</code> はrefに格納される新しいオブジェクト名です。 <code>&lt;ref-name&gt;</code> はrefのフルネームです。 新しいrefを作成する場合、 <code>&lt;old-value&gt;</code> はすべてゼロのオブジェクト名です。</p></div>
<div class="paragraph"><p>フックがゼロ以外のステータスで終了した場合、どのrefも更新されません。フックがゼロで終了する場合でも、個々のrefの更新は<a href="#update"><code>update</code></a>フックによって防ぐことができます。</p></div>
<div class="paragraph"><p>標準出力と標準エラー出力の両方がもう一方の側の <code>git send-pack</code> に転送(forward)されるため、ユーザーにメッセージを <code>echo</code> するだけで済みます。</p></div>
<div class="paragraph"><p><code>git push --push-option=...</code> のコマンドラインで指定された、プッシュオプションの数は環境変数 <code>GIT_PUSH_OPTION_COUNT</code> から読み取ることができ、オプション自体は <code>GIT_PUSH_OPTION_0</code> 、 <code>GIT_PUSH_OPTION_1</code> 、 … から読み取る事ができます。プッシュオプションフェーズを使用しないように取り決めた場合、環境変数は設定されません。クライアントがプッシュオプションの使用を選択したが、何も送信しない場合、カウント変数はゼロ、つまり <code>GIT_PUSH_OPTION_COUNT=0</code> に設定されます。</p></div>
<div class="paragraph"><p>いくつかの注意点については、 <a href="git-receive-pack.html">git-receive-pack(1)</a> の「Quarantine Environment」のセクションを参照してください。</p></div>
</div>
<div class="sect2">
<h3 id="update">update</h3>
<div class="paragraph"><p>このフックは、 <code>git push</code> に反応し、リポジトリ内の参照を更新するときに、 <a href="git-receive-pack.html">git-receive-pack(1)</a> によって呼び出されます。リモートリポジトリのrefを更新する直前に、 update フックが呼び出されます。その終了ステータスによって、ref更新の成功または失敗が決まります。</p></div>
<div class="paragraph"><p>フックは、更新されるrefごとに1回実行され、以下の3つのパラメーターを取ります:</p></div>
<div class="ulist"><ul>
<li>
<p>
更新されるrefの名前
</p>
</li>
<li>
<p>
refに保存されている古いオブジェクト名
</p>
</li>
<li>
<p>
refに格納される新しいオブジェクト名
</p>
</li>
</ul></div>
<div class="paragraph"><p>更新フックがゼロステータスで終了すると、refを更新できます。ゼロ以外のステータスで終了すると、 <code>git receive-pack</code> はそのrefを更新できなくなります。</p></div>
<div class="paragraph"><p>このフックは、オブジェクト名が古いオブジェクト名で指定されたコミットオブジェクトの子孫であるコミットオブジェクトであることを確認することにより、特定のrefでの「強制」更新を防ぐために使用できます。つまり、「早送りのみ」(fast-forward only)のポリシーを適用します。</p></div>
<div class="paragraph"><p>また、 old..new ステータスをログに記録するために使用することもできます。ただし、ブランチのセット全体を認識しているわけではないため、単純に使用すると、refごとに1つの電子メールが送信されることになります。そのためには<a href="#post-receive"><code>post-receive</code></a>フックの方が適しています。</p></div>
<div class="paragraph"><p>ユーザーのアクセスをネットワーク経由のgitコマンドのみに制限する環境では、このフックを使用して、ファイルシステムの所有権やグループメンバーシップに依存せずにアクセス制御を実装できます。ログインシェルを使用してユーザーのアクセスをgitコマンドのみに制限する方法については、 <a href="git-shell.html">git-shell(1)</a> を参照してください。</p></div>
<div class="paragraph"><p>標準出力と標準エラー出力の両方がもう一方の側の <code>git send-pack</code> に転送(forward)されるため、ユーザーにメッセージを <code>echo</code> するだけで済みます。</p></div>
<div class="paragraph"><p>デフォルトの <code>update</code> フックが有効になっている場合&#8201;&#8212;&#8201;および <code>hooks.allowunannotated</code> 構成オプションが設定されていないかfalseに設定されている場合&#8201;&#8212;&#8201;注釈のないタグ(unannotated tags)がプッシュされるのを防ぎます。</p></div>
</div>
<div class="sect2">
<h3 id="proc-receive">proc-receive</h3>
<div class="paragraph"><p>このフックは <a href="git-receive-pack.html">git-receive-pack(1)</a> によって呼び出されます。サーバーが複数値の構成変数 <code>receive.procReceiveRefs</code> を設定し、そして <code>receive-pack</code> に送信されるコマンドの参照名が一致する場合、これらのコマンドは、内部の <code>execute_commands()</code> 関数ではなく、このフックによって実行されます。このフックは、関連する参照を更新し、結果を <code>receive-pack</code> に報告する役割を果たします。</p></div>
<div class="paragraph"><p>このフックは、受信操作に対して1回実行されます。引数は取りませんが、pkt-line形式のプロトコルを使用して <code>receive-pack</code> と通信し、コマンド、プッシュオプションを読み取り、結果を送信します。行かのプロトコルの例では、文字 <code>S</code> は <code>receive-pack</code> を表し、文字 <code>H</code> はこのフックを表します。</p></div>
<div class="literalblock">
<div class="content">
<pre><code># Version and features negotiation.
S: PKT-LINE(version=1\0push-options atomic...)
S: flush-pkt
H: PKT-LINE(version=1\0push-options...)
H: flush-pkt</code></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><code># Send commands from server to the hook.
S: PKT-LINE(&lt;old-oid&gt; &lt;new-oid&gt; &lt;ref&gt;)
S: ... ...
S: flush-pkt
# Send push-options only if the 'push-options' feature is enabled.
S: PKT-LINE(push-option)
S: ... ...
S: flush-pkt</code></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><code># Receive result from the hook.
# OK, run this command successfully.
H: PKT-LINE(ok &lt;ref&gt;)
# NO, I reject it.
H: PKT-LINE(ng &lt;ref&gt; &lt;reason&gt;)
# Fall through, let 'receive-pack' to execute it.
H: PKT-LINE(ok &lt;ref&gt;)
H: PKT-LINE(option fall-through)
# OK, but has an alternate reference.  The alternate reference name
# and other status can be given in option directives.
H: PKT-LINE(ok &lt;ref&gt;)
H: PKT-LINE(option refname &lt;refname&gt;)
H: PKT-LINE(option old-oid &lt;old-oid&gt;)
H: PKT-LINE(option new-oid &lt;new-oid&gt;)
H: PKT-LINE(option forced-update)
H: ... ...
H: flush-pkt</code></pre>
</div></div>
<div class="paragraph"><p><code>proc-receive</code> フックの各コマンドは、疑似参照(pseudo-reference)を指す場合があり、そのold-oidとして常にゼロオールドを持ちます。一方、 <code>proc-receive</code> フックは代替参照(alternate reference)を更新する可能性があり、代替参照はゼロ以外のold-oidで既に存在する可能性があります。この場合、このフックは <code>option</code> ディレクティブを使用して、先頭の <code>ok</code> ディレクティブによって指定された参照の拡張属性を報告します。</p></div>
<div class="paragraph"><p>このフックのコマンドの報告は、入力と同じ順序である必要があります。 <code>proc-receive</code> フックの終了ステータスは、アトミックプッシュ(atomic push)が使用されていない限り、送信したコマンドグループの成功または失敗のみを決定します。</p></div>
</div>
<div class="sect2">
<h3 id="post-receive">post-receive</h3>
<div class="paragraph"><p>このフックは、 <code>git push</code> に反応し、リポジトリ内の参照を更新するときに、 <a href="git-receive-pack.html">git-receive-pack(1)</a> によって呼び出されます。すべてのrefが更新された後、リモートリポジトリで実行されます。</p></div>
<div class="paragraph"><p>このフックは、受信操作に対して1回実行されます。引数は取りませんが、 <a href="#pre-receive"><code>pre-receive</code></a> フックが標準入力で行うのと同じ情報を取得します。</p></div>
<div class="paragraph"><p>このフックは、実際の作業が完了した後に呼び出されるため、 <code>git receive-pack</code> の結果には影響しません。</p></div>
<div class="paragraph"><p>これは、名前に加えてすべてのrefの古い値と新しい値の両方を取得するという点で、 <a href="#post-update"><code>post-update</code></a> フックに取って代わります。</p></div>
<div class="paragraph"><p>標準出力と標準エラー出力の両方がもう一方の側の <code>git send-pack</code> に転送(forward)されるため、ユーザーにメッセージを <code>echo</code> するだけで済みます。</p></div>
<div class="paragraph"><p>デフォルトの <code>post-receive</code> フックは空ですが、Gitディストリビューションの <code>contrib/hooks</code> ディレクトリにサンプルスクリプト <code>post-receive-email</code> があり、コミットメールの送信を実装しています。</p></div>
<div class="paragraph"><p><code>git push --push-option=...</code> のコマンドラインで指定された、プッシュオプションの数は環境変数 <code>GIT_PUSH_OPTION_COUNT</code> から読み取ることができ、オプション自体は <code>GIT_PUSH_OPTION_0</code> 、 <code>GIT_PUSH_OPTION_1</code> 、 … から読み取る事ができます。プッシュオプションフェーズを使用しないように取り決めた場合、環境変数は設定されません。クライアントがプッシュオプションの使用を選択したが、何も送信しない場合、カウント変数はゼロ、つまり <code>GIT_PUSH_OPTION_COUNT=0</code> に設定されます。</p></div>
</div>
<div class="sect2">
<h3 id="post-update">post-update</h3>
<div class="paragraph"><p>このフックは、 <code>git push</code> に反応し、リポジトリ内の参照を更新するときに、 <a href="git-receive-pack.html">git-receive-pack(1)</a> によって呼び出されます。すべてのrefが更新された後、リモートリポジトリで実行されます。</p></div>
<div class="paragraph"><p>可変数のパラメーターを取ります。各パラメーターは、実際に更新されたrefの名前です。</p></div>
<div class="paragraph"><p>このフックは主に通知用であり、 <code>git receive-pack</code> の結果に影響を与えることはできません。</p></div>
<div class="paragraph"><p><code>post-update</code> フックは、プッシュされたヘッドが何であるかを知ることができますが、元の値と更新された値が何であるかを知らないため、 logold..new を実行するのに適した場所ではありません。 <a href="#post-receive"><code>post-receive</code></a>フックは、参照の元の値と更新された値の両方を取得するので、必要に応じて、このフックの代わりに検討することもできます。</p></div>
<div class="paragraph"><p>有効にすると、デフォルトの <code>post-update</code> フックが <code>git update-server-info</code> を実行して、バカ転送(dumb transports)(例:HTTP)で使用される情報を最新の状態に保ちます。 HTTP経由でアクセスできるGitリポジトリを公開している場合は、あなたはおそらくこのフックを有効にする必要があります。</p></div>
<div class="paragraph"><p>標準出力と標準エラー出力の両方がもう一方の側の <code>git send-pack</code> に転送(forward)されるため、ユーザーにメッセージを <code>echo</code> するだけで済みます。</p></div>
</div>
<div class="sect2">
<h3 id="_reference_transaction">reference-transaction</h3>
<div class="paragraph"><p>このフックは、参照の更新を実行するGitコマンドによって呼び出されます。参照トランザクションが、準備またはコミットまたは中止されるたびに実行されるため、複数回呼び出される可能性があります。このフックはシンボリック参照をカバーしていません(ただし、将来変更される可能性があります)。</p></div>
<div class="paragraph"><p>フックは引数を1つだけ取りますが、これは指定された参照トランザクションの現在の状態です:</p></div>
<div class="ulist"><ul>
<li>
<p>
"prepared" : すべての参照更新がトランザクションのキューに入れられ、参照がディスク上でロックされました。
</p>
</li>
<li>
<p>
"committed": 参照トランザクションがコミットされ、すべての参照にそれぞれの新しい値が追加されました。
</p>
</li>
<li>
<p>
"aborted": 参照トランザクションが中止され、変更は実行されず、ロックが解放されました。
</p>
</li>
</ul></div>
<div class="paragraph"><p>トランザクションに追加された参照更新ごとに、フックは標準入力で以下の形式の行を受け取ります:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>&lt;old-value&gt; SP &lt;new-value&gt; SP &lt;ref-name&gt; LF</code></pre>
</div></div>
<div class="paragraph"><p>ここで、 <code>&lt;old-value&gt;</code> は、参照トランザクションに渡された古いオブジェクト名です。 <code>&lt;new-value&gt;</code> はrefに格納される新しいオブジェクト名であり、 <code>&lt;ref-name&gt;</code> はrefのフルネームです。現在の値に関係なく参照を強制的に更新する場合、または参照を新たに作成する場合は、 <code>&lt;old-value&gt;</code> はすべてゼロのオブジェクト名です。あなたは、これらのケースを区別するために、 <code>gitrev-parse</code> を介して <code>&lt;ref-name&gt;</code> の現在の値を調べることができます。</p></div>
<div class="paragraph"><p>フックの終了ステータスは、「prepared」(準備済み)状態を除くすべての状態で無視されます。「prepared」状態では、ゼロ以外の終了ステータスにより、トランザクションが中止(abort)されます。その場合、フックは「中止」状態で呼び出さることはありません。</p></div>
</div>
<div class="sect2">
<h3 id="_push_to_checkout">push-to-checkout</h3>
<div class="paragraph"><p>プッシュが現在チェックアウトされているブランチを更新しようと試み、かつ、 <code>receive.denyCurrentBranch</code> 構成変数が <code>updateInstead</code> に設定されている場合、このフックは、 <code>git push</code> に反応し、リポジトリ内の参照を更新するときに、 <a href="git-receive-pack.html">git-receive-pack(1)</a> によって呼び出されます。作業ツリーとリモートリポジトリのインデックスが現在チェックアウトされているコミットと異なる場合、このようなプッシュはデフォルトで拒否されます。作業ツリーとインデックスの両方が現在のコミットと一致する場合、それらは、ブランチの新しくプッシュされた先端に一致するように更新されます。このフックは、デフォルトの動作をオーバーライドするために使用されます。</p></div>
<div class="paragraph"><p>フックは、現在のブランチの先端が更新されるコミットを受け取ります。ゼロ以外のステータスで終了してプッシュを拒否できます(そうする場合は、インデックスまたは作業ツリーを変更してはいけません)。または、作業ツリーとインデックスに必要な変更を加えて、現在のブランチの先端が新しいコミットに更新されたときにそれらを目的の状態にし、ゼロステータスで終了することもできます。</p></div>
<div class="paragraph"><p>例えば、フックは単純に <code>git read-tree -u -m HEAD "$1"</code> を実行して、<code>git push</code> と逆方向に実行する <code>git fetch</code> をエミュレートすることができます。 <code>git read-tree -u -m</code> の二木形式(two-tree form)は、ブランチの違いを妨げない範囲で作業ツリー(working tree)のローカル変更を維持しながらブランチを切り替える <code>git switch</code> や <code>git checkout</code> と本質的に同じものだからです。</p></div>
</div>
<div class="sect2">
<h3 id="_pre_auto_gc">pre-auto-gc</h3>
<div class="paragraph"><p>このフックは <code>git gc --auto</code> によって呼び出されます(<a href="git-gc.html">git-gc(1)</a> を参照)。パラメータを必要とせず、このスクリプトをゼロ以外のステータスで終了させると、 <code>git gc --auto</code> が中止(abort)されます。</p></div>
</div>
<div class="sect2">
<h3 id="_post_rewrite">post-rewrite</h3>
<div class="paragraph"><p>このフックは、commitを書き換えるコマンド(<code>--amend</code> や <a href="git-rebase.html">git-rebase(1)</a> から呼び出された場合の <a href="git-commit.html">git-commit(1)</a> 。ただし、 <a href="git-fast-import.html">git-fast-import(1)</a>や <a href="https://github.com/newren/git-filter-repo">git-filter-repo</a> などの完全な履歴(再)書き込みツールは通常、呼び出さないでください！)によって呼び出されます。その最初の引数は、それが呼び出されたコマンドを示します。それは現在、<code>amend</code> または <code>rebase</code> のいずれかです。将来、コマンドに依存する引数がさらに渡される可能性があります。</p></div>
<div class="paragraph"><p>フックは、stdinから、書き換えられたコミットのリストを以下の形式で受け取ります。</p></div>
<div class="literalblock">
<div class="content">
<pre><code>&lt;old-object-name&gt; SP &lt;new-object-name&gt; [ SP &lt;extra-info&gt; ] LF</code></pre>
</div></div>
<div class="paragraph"><p><code>extra-info</code> もコマンド依存です。空の場合、先行するSPも省略されます。現在、 <code>extra-info</code> を渡すコマンドはありません。</p></div>
<div class="paragraph"><p>フックは常に、自動noteコピー(<a href="git-config.html">git-config(1)</a>の <code>notes.rewrite.&lt;command&gt;</code> 参照)が発生した後に実行されるため、フックはこれらのnoteにアクセスできます。</p></div>
<div class="paragraph"><p>以下のコマンド固有のコメントが適用されます:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
rebase
</dt>
<dd>
<p>
        <code>squash</code> 操作と <code>fixup</code> 操作の場合、スカッシュされたすべてのコミットは、スカッシュされたコミットに書き換えられたものとしてリストされます。これは、同じ「new-object-name」を共有する複数の行があることを意味します。
</p>
<div class="paragraph"><p>コミットは、リベースによって処理された順序でリストされることが保証されています。</p></div>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_sendemail_validate">sendemail-validate</h3>
<div class="paragraph"><p>This hook is invoked by <a href="git-send-email.html">git-send-email(1)</a>.</p></div>
<div class="paragraph"><p>It takes these command line arguments. They are,
1. the name of the file which holds the contents of the email to be sent.
2. The name of the file which holds the SMTP headers of the email.</p></div>
<div class="paragraph"><p>The SMTP headers are passed in the exact same way as they are passed to the user&#8217;s Mail Transport Agent (MTA). In effect, the email given to the user&#8217;s MTA, is the contents of $2 followed by the contents of $1.</p></div>
<div class="paragraph"><p>An example of a few common headers is shown below. Take notice of the capitalization and multi-line tab structure.</p></div>
<div class="literalblock">
<div class="content">
<pre><code>From: Example &lt;from@example.com&gt;
To: to@example.com
Cc: cc@example.com,
        A &lt;author@example.com&gt;,
        One &lt;one@example.com&gt;,
        two@example.com
Subject: PATCH-STRING</code></pre>
</div></div>
<div class="paragraph"><p>Exiting with a non-zero status causes <code>git send-email</code> to abort before sending any e-mails.</p></div>
<div class="paragraph"><p>The following environment variables are set when executing the hook.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<code>GIT_SENDEMAIL_FILE_COUNTER</code>
</dt>
<dd>
<p>
        A 1-based counter incremented by one for every file holding an e-mail to be sent (excluding any FIFOs). This counter does not follow the patch series counter scheme. It will always start at 1 and will end at GIT_SENDEMAIL_FILE_TOTAL.
</p>
</dd>
<dt class="hdlist1">
<code>GIT_SENDEMAIL_FILE_TOTAL</code>
</dt>
<dd>
<p>
        The total number of files that will be sent (excluding any FIFOs). This counter does not follow the patch series counter scheme. It will always be equal to the number of files being sent, whether there is a cover letter or not.
</p>
</dd>
</dl></div>
<div class="paragraph"><p>These variables may for instance be used to validate patch series.</p></div>
<div class="paragraph"><p>The sample <code>sendemail-validate</code> hook that comes with Git checks that all sent patches (excluding the cover letter) can be applied on top of the upstream repository default branch without conflicts. Some placeholders are left for additional validation steps to be performed after all patches of a given series have been applied.</p></div>
</div>
<div class="sect2">
<h3 id="_fsmonitor_watchman">fsmonitor-watchman</h3>
<div class="paragraph"><p>このフックは、使用するフックのバージョンに応じて、構成オプション <code>core.fsmonitor</code> が <code>.git/hooks/fsmonitor-watchman</code> または <code>.git/hooks/fsmonitor-watchmanv2</code> に設定されている場合に呼び出されます。</p></div>
<div class="paragraph"><p>バージョン1は、バージョン(つまり、1)と、1970年1月1日の0:00から経過したナノ秒単位の時間の、2つの引数を取ります。</p></div>
<div class="paragraph"><p>バージョン2は、バージョン(つまり、2)と、トークン以降の変更を識別するために使用されるトークンの、2つの引数を取ります。ウォッチマン(watchman)の場合、これはクロックID(clock id)になります。このバージョンでは、新しいトークンの後のファイルのリストの前にNULを付けて標準出力しなければなりません。</p></div>
<div class="paragraph"><p>フックは、要求された時間以降に変更された可能性のある作業ディレクトリ内のすべてのファイルのリストをstdoutに出力する必要があります。潜在的な変更を見逃さないように、ロジックは包括的(inclusive)である必要があります。パスは、作業ディレクトリのルートを基準にして、単一のNULで区切る必要があります。</p></div>
<div class="paragraph"><p>実際に変更されていないファイルを含めてもかまいません。新しく作成および削除されたファイルを含むすべての変更を含める必要があります。ファイルの名前を変更するときは、古い名前と新しい名前の両方を含める必要があります。</p></div>
<div class="paragraph"><p>Gitは、指定のパス名に基づいて、変更をチェックするファイルと、追跡されていないファイルをチェックするディレクトリを制限します。</p></div>
<div class="paragraph"><p>gitに「すべてのファイルが変更されました」と伝えるための最適化された方法は、ファイル名 <code>/</code> を返すことです。</p></div>
<div class="paragraph"><p>終了ステータスは、gitがフックからのデータを使用して検索を制限するかどうかを決定します。エラーが発生すると、すべてのファイルとフォルダーの検証にフォールバックします。</p></div>
</div>
<div class="sect2">
<h3 id="_p4_changelist">p4-changelist</h3>
<div class="paragraph"><p>このフックは <code>git-p4 submit</code> によって呼び出されます。</p></div>
<div class="paragraph"><p><code>p4-changelist</code> フックは、ユーザーがチェンジリストメッセージ(changelist message)を編集した後に実行されます。 <code>--no-verify</code> オプションでバイパスできます。提案されたチェンジリストテキストを保持するファイルの名前という単一のパラメータを取ります。ゼロ以外のステータスで終了すると、コマンドは中止(abort)されます。</p></div>
<div class="paragraph"><p>フックはチェンジリストファイル(changelist file)の編集を許可されており、テキストをプロジェクトの標準形式に正規化するために使用できます。また、メッセージファイルを検査した後に送信を拒否するために使用することもできます。</p></div>
<div class="paragraph"><p>詳細については、 <code>git-p4 submit --help</code> を実行してください。</p></div>
</div>
<div class="sect2">
<h3 id="_p4_prepare_changelist">p4-prepare-changelist</h3>
<div class="paragraph"><p>このフックは <code>git-p4 submit</code> によって呼び出されます。</p></div>
<div class="paragraph"><p><code>p4-prepare-changelist</code> フックは、デフォルトのチェンジリストメッセージ(changelist message)を準備した直後、エディタが起動する前に実行されます。これは、チェンジリストのテキストを含むファイルの名前という1つのパラメーターを取ります。スクリプトをゼロ以外のステータスで終了すると、プロセスが中止(abort)されます。</p></div>
<div class="paragraph"><p>フックの目的は、メッセージファイルを所定の位置で編集することであり、<code>--no-verify</code> オプションによって抑制されることはありません。 このフックは、 <code>--prepare-p4-only</code> が設定されている場合でも呼び出されます。</p></div>
<div class="paragraph"><p>詳細については、 <code>git-p4 submit --help</code> を実行してください。</p></div>
</div>
<div class="sect2">
<h3 id="_p4_post_changelist">p4-post-changelist</h3>
<div class="paragraph"><p>このフックは <code>git-p4 submit</code> によって呼び出されます。</p></div>
<div class="paragraph"><p><code>p4-post-changelist</code> フックは、送信(submit)がP4で正常に発生した後に呼び出されます。これはパラメーターを必要とせず、主に通知を目的としており、git p4 submitアクションの結果に影響を与えることはできません。</p></div>
<div class="paragraph"><p>詳細については、 <code>git-p4 submit --help</code> を実行してください。</p></div>
</div>
<div class="sect2">
<h3 id="_p4_pre_submit">p4-pre-submit</h3>
<div class="paragraph"><p>このフックは <code>git-p4 submit</code> によって呼び出されます。これはパラメータをとらず、標準入力から何も取りません。このスクリプトをゼロ以外のステータスで終了すると、 <code>git-p4 submit</code> の起動を妨げます。 <code>--no-verify</code> コマンドラインオプションでバイパスできます。詳細については、 <code>git-p4 submit --help</code> を実行してください。</p></div>
</div>
<div class="sect2">
<h3 id="_post_index_change">post-index-change</h3>
<div class="paragraph"><p>このフックは、インデックスが read-cache.c の do_write_locked_index に書き込まれるときに呼び出されます。</p></div>
<div class="paragraph"><p>フックに渡される最初のパラメーターは、更新される作業ディレクトリのインジケーターです。「1」は作業ディレクトリが更新されたことを意味し、「0」は作業ディレクトリが更新されなかったことを意味します。</p></div>
<div class="paragraph"><p>フックに渡される2番目のパラメーターは、インデックスが更新され、 skip-worktree ビットが変更された可能性があるかどうかを示すインジケーターです。「1」はskip-worktreeビットが更新された可能性があることを意味し、「0」は更新されなかったことを意味します。</p></div>
<div class="paragraph"><p>フックの実行時に "1" に設定するパラメーターは1つだけです。 両方のパラメータを "1" に設定してはいけません。</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph"><p><a href="git-hook.html">git-hook(1)</a></p></div>
</div>
</div>
<div class="sect1">
<h2 id="_git">GIT</h2>
<div class="sectionbody">
<div class="paragraph"><p>Part of the <a href="git.html">git(1)</a> suite</p></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated
 2023-07-18 11:05:53 JST
</div>
</div>
</body>
</html>
